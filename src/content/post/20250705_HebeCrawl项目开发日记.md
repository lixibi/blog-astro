---
title: HebeCrawlï¼šæ„å»ºAIé©±åŠ¨çš„æ™ºèƒ½å·¥ä½œæµç³»ç»Ÿæ·±åº¦å®è·µ
description: ä»é›¶æ„å»ºç±»ä¼¼n8nçš„AIæ™ºèƒ½å·¥ä½œæµç³»ç»Ÿï¼Œæ·±åº¦è§£ææç¤ºè¯å·¥ç¨‹ã€æ™ºèƒ½å†³ç­–æ ‘ã€å¤šæ¨¡æ€å¤„ç†å’Œå®¹é”™æœºåˆ¶çš„å®Œæ•´å®ç°
publishDate: 2025-07-05T00:00:00
tags:
  - AIå·¥ä½œæµ
  - æç¤ºè¯å·¥ç¨‹
  - æ™ºèƒ½å†³ç­–
  - FastAPI
  - å¤šæ¨¡æ€å¤„ç†
  - æŠ€æœ¯æ·±åº¦
ogImage: /social-card.avif
---

> ä¸åªæ˜¯ä¸€ä¸ªçˆ¬è™«å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„AIé©±åŠ¨æ™ºèƒ½å·¥ä½œæµç³»ç»Ÿ

## å‰è¨€ï¼šé‡æ–°å®šä¹‰æ™ºèƒ½å†…å®¹å¤„ç†

å½“æˆ‘å¼€å§‹æ„æ€HebeCrawlæ—¶ï¼Œè„‘æµ·ä¸­çš„æ„¿æ™¯è¿œä¸æ­¢ä¸€ä¸ªç®€å•çš„ç½‘é¡µæŠ“å–å·¥å…·ã€‚æˆ‘æƒ³è¦åˆ›å»ºçš„æ˜¯ä¸€ä¸ª**AIé©±åŠ¨çš„æ™ºèƒ½å·¥ä½œæµç³»ç»Ÿ**â€”â€”ç±»ä¼¼äºn8nçš„ç†å¿µï¼Œä½†ä¸“æ³¨äºå†…å®¹å¤„ç†å’ŒçŸ¥è¯†ç®¡ç†é¢†åŸŸã€‚

è¿™ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒä¸æ˜¯æŠ€æœ¯ç‚«æŠ€ï¼Œè€Œæ˜¯**è®©AIçœŸæ­£ç†è§£ç”¨æˆ·æ„å›¾ï¼Œè‡ªåŠ¨ç¼–æ’å¤„ç†æµç¨‹**ã€‚ç”¨æˆ·åªéœ€è¦è¾“å…¥ä»»ä½•å†…å®¹ï¼Œç³»ç»Ÿå°±èƒ½æ™ºèƒ½åˆ†æã€å†³ç­–è·¯ç”±ã€æ‰§è¡Œå¤„ç†ã€ç”Ÿæˆç»“æœã€‚

**è®¾è®¡ç†å¿µçš„æ¼”è¿›**ï¼š
- **ä¼ ç»Ÿæ–¹å¼**ï¼šç”¨æˆ·é€‰æ‹©å·¥å…· â†’ é…ç½®å‚æ•° â†’ æ‰§è¡Œå¤„ç†
- **HebeCrawlæ–¹å¼**ï¼šç”¨æˆ·è¾“å…¥å†…å®¹ â†’ AIç†è§£æ„å›¾ â†’ è‡ªåŠ¨æ‰§è¡Œå·¥ä½œæµ

è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯é¡¹ç›®ï¼Œæ›´æ˜¯å¯¹**AIæ—¶ä»£äººæœºäº¤äº’æ¨¡å¼**çš„æ·±åº¦æ¢ç´¢ã€‚

## ç³»ç»Ÿæ¶æ„ï¼šAIå·¥ä½œæµå¼•æ“çš„è®¾è®¡å“²å­¦

### æ™ºèƒ½å·¥ä½œæµçš„å››å¤§æ”¯æŸ±

**1. æ„å›¾ç†è§£å±‚ï¼ˆIntent Understandingï¼‰**ï¼š
- åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ·±åº¦å†…å®¹åˆ†æ
- å¤šç»´åº¦ç‰¹å¾æå–å’Œè¯­ä¹‰ç†è§£
- ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„æ™ºèƒ½å†³ç­–

**2. å†³ç­–è·¯ç”±å±‚ï¼ˆDecision Routingï¼‰**ï¼š
- æ™ºèƒ½å†³ç­–æ ‘çš„åŠ¨æ€æ„å»º
- å¤šè·¯å¾„å¹¶è¡Œå¤„ç†æœºåˆ¶
- å¼‚å¸¸æƒ…å†µçš„ä¼˜é›…é™çº§

**3. æ‰§è¡Œå¼•æ“å±‚ï¼ˆExecution Engineï¼‰**ï¼š
- æ¨¡å—åŒ–çš„å¤„ç†èŠ‚ç‚¹è®¾è®¡
- å¼‚æ­¥ä»»åŠ¡çš„ç¼–æ’å’Œè°ƒåº¦
- å®æ—¶çŠ¶æ€ç›‘æ§å’Œåé¦ˆ

**4. ç»“æœæ•´åˆå±‚ï¼ˆResult Integrationï¼‰**ï¼š
- å¤šæ¨¡æ€è¾“å‡ºçš„ç»Ÿä¸€å°è£…
- æ™ºèƒ½æ–‡ä»¶ç»„ç»‡å’Œå‘½å
- ç»“æ„åŒ–æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨

### æ ¸å¿ƒæŠ€æœ¯åˆ›æ–°

**AI-Firstè®¾è®¡ç†å¿µ**ï¼š
```
ä¼ ç»Ÿå·¥ä½œæµï¼šè§„åˆ™é©±åŠ¨ â†’ å›ºå®šè·¯å¾„ â†’ æœºæ¢°æ‰§è¡Œ
æ™ºèƒ½å·¥ä½œæµï¼šæ„å›¾ç†è§£ â†’ åŠ¨æ€å†³ç­– â†’ è‡ªé€‚åº”æ‰§è¡Œ
```

**å…³é”®æŠ€æœ¯çªç ´**ï¼š
1. **é›¶é…ç½®æ™ºèƒ½è·¯ç”±**ï¼šç”¨æˆ·æ— éœ€é¢„è®¾å·¥ä½œæµï¼ŒAIåŠ¨æ€ç”Ÿæˆ
2. **å¤šæ¨¡æ€å†…å®¹èåˆ**ï¼šæ–‡æœ¬ã€URLã€å›¾ç‰‡çš„ç»Ÿä¸€å¤„ç†æ¡†æ¶
3. **è‡ªæ„ˆæ€§å®¹é”™æœºåˆ¶**ï¼šé…ç½®å¤±æ•ˆæ—¶çš„è‡ªåŠ¨åˆ‡æ¢å’Œæ¢å¤
4. **è¯­ä¹‰åŒ–æ–‡ä»¶ç®¡ç†**ï¼šåŸºäºå†…å®¹ç†è§£çš„æ™ºèƒ½ç»„ç»‡

## ç¬¬ä¸€éƒ¨åˆ†ï¼šAIæ„å›¾ç†è§£å¼•æ“è®¾è®¡

### æç¤ºè¯å·¥ç¨‹çš„æ·±åº¦å®è·µ

æç¤ºè¯è®¾è®¡æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒï¼Œæˆ‘å°†å…¶è§†ä¸º"AIçš„ç¨‹åºä»£ç "ã€‚æ¯ä¸€ä¸ªpromptéƒ½ç»è¿‡äº†ç²¾å¿ƒçš„å·¥ç¨‹åŒ–è®¾è®¡ã€‚

#### 1.1 å†…å®¹ç±»å‹åˆ¤æ–­çš„æç¤ºè¯æ¶æ„

**è®¾è®¡ç›®æ ‡**ï¼šè®©AIå‡†ç¡®ç†è§£ç”¨æˆ·è¾“å…¥çš„å†…å®¹æ„å›¾ï¼Œè€Œä¸ä»…ä»…æ˜¯è¯†åˆ«URLã€‚

**æ ¸å¿ƒæŒ‘æˆ˜**ï¼š
- URLå¯èƒ½åµŒåœ¨å¤§é‡æ–‡å­—ä¸­
- Markdownæ ¼å¼çš„é“¾æ¥å’Œå›¾ç‰‡
- å¤åˆ¶ç²˜è´´å¸¦æ¥çš„æ— å…³ä¿¡æ¯
- æ¨¡ç³Šè¾¹ç•Œçš„æ··åˆå†…å®¹

**æç¤ºè¯åˆ†å±‚è®¾è®¡**ï¼š

```python
# ç¬¬ä¸€å±‚ï¼šè§’è‰²å®šä¹‰å’Œä»»åŠ¡è¾¹ç•Œ
"""ä½ æ˜¯ä¸€ä¸ªå†…å®¹ç±»å‹åˆ†æå’ŒURLæå–åŠ©æ‰‹ã€‚è¯·åˆ†æç”¨æˆ·æä¾›çš„å†…å®¹ï¼Œåˆ¤æ–­å…¶ä¸»è¦ç±»å‹å¹¶æå–URLã€‚"""

# ç¬¬äºŒå±‚ï¼šåˆ¤æ–­è§„åˆ™çš„ç»“æ„åŒ–æè¿°
"""
åˆ¤æ–­è§„åˆ™ï¼š
1. **URLç±»å‹**ï¼šå¦‚æœå†…å®¹ä¸»è¦æ˜¯URLé“¾æ¥ï¼ˆå³ä½¿åŒ…å«å°‘é‡å…¶ä»–æ–‡å­—ï¼‰ï¼Œåº”å½’ç±»ä¸ºURL
   - å•ä¸ªæˆ–å¤šä¸ªURLé“¾æ¥
   - URL + ç®€çŸ­æè¿°æ–‡å­—
   - å¤åˆ¶ç²˜è´´æ—¶å¸¦æ¥çš„å°‘é‡æ— å…³æ–‡å­— + URL
   - Markdownæ ¼å¼çš„é“¾æ¥å’Œå›¾ç‰‡

2. **ç¬”è®°ç±»å‹**ï¼šå¦‚æœå†…å®¹ä¸»è¦æ˜¯æ–‡å­—ä¿¡æ¯ã€ç¬”è®°ã€æƒ³æ³•ç­‰ï¼Œåº”å½’ç±»ä¸ºç¬”è®°
   - å¤§æ®µæ–‡å­—å†…å®¹
   - å­¦ä¹ ç¬”è®°ã€å·¥ä½œè®°å½•
   - å³ä½¿åŒ…å«URLï¼Œä½†æ–‡å­—å†…å®¹å ä¸»å¯¼
"""

# ç¬¬ä¸‰å±‚ï¼šæŠ€æœ¯å®ç°è¦æ±‚
"""
URLæå–è¦æ±‚ï¼š
- ä»”ç»†åˆ†æå†…å®¹ï¼Œæå–æ‰€æœ‰å®Œæ•´çš„ã€æœ‰æ•ˆçš„URL
- æ”¯æŒå„ç§æ ¼å¼ï¼šç›´æ¥URLã€Markdowné“¾æ¥[text](url)ã€Markdownå›¾ç‰‡![alt](url)
- ç¡®ä¿æå–çš„URLæ˜¯å®Œæ•´çš„ï¼Œä»¥http://æˆ–https://å¼€å¤´
- ç§»é™¤URLä¸­çš„å¤šä½™å­—ç¬¦ï¼ˆå¦‚æœ«å°¾çš„æ‹¬å·ã€å¼•å·ç­‰ï¼‰
- åªè¿”å›å¯ä»¥ç›´æ¥è®¿é—®çš„URL
"""

# ç¬¬å››å±‚ï¼šè¾“å‡ºæ ¼å¼çº¦æŸ
"""
è¯·è¿”å›JSONæ ¼å¼ï¼š
{
  "type": "url" æˆ– "note",
  "urls": ["æå–çš„æ‰€æœ‰å®Œæ•´URLåˆ—è¡¨"],
  "reason": "åˆ¤æ–­ç†ç”±"
}
"""

# ç¬¬äº”å±‚ï¼šç¤ºä¾‹é©±åŠ¨å­¦ä¹ 
"""
ç¤ºä¾‹ï¼š
è¾“å…¥ï¼š[![](https://example.com/image.png)](https://example.com)
è¾“å‡ºï¼š{"type": "url", "urls": ["https://example.com/image.png", "https://example.com"], "reason": "æ£€æµ‹åˆ°Markdownæ ¼å¼çš„å›¾ç‰‡å’Œé“¾æ¥"}
"""
```

**è®¾è®¡æŠ€å·§è§£æ**ï¼š

1. **åˆ†å±‚é€’è¿›**ï¼šä»æŠ½è±¡åˆ°å…·ä½“ï¼Œä»æ¦‚å¿µåˆ°å®ç°
2. **è¾¹ç•Œæ˜ç¡®**ï¼šç”¨åŠ ç²—å’Œç¼–å·æ˜ç¡®åŒºåˆ†ä¸åŒæƒ…å†µ
3. **ç¤ºä¾‹éªŒè¯**ï¼šæä¾›edge caseçš„å¤„ç†ç¤ºä¾‹
4. **æ ¼å¼çº¦æŸ**ï¼šä¸¥æ ¼çš„JSON Schemaç¡®ä¿è¾“å‡ºå¯è§£æ
5. **reasonå­—æ®µ**ï¼šå¼ºåˆ¶AIè§£é‡Šåˆ¤æ–­é€»è¾‘ï¼Œä¾¿äºè°ƒè¯•

#### 1.2 æ™ºèƒ½æ€»ç»“çš„è‡ªé€‚åº”æç¤ºè¯

**è®¾è®¡å“²å­¦**ï¼šä¸æ˜¯ç®€å•çš„æ–‡æœ¬å‹ç¼©ï¼Œè€Œæ˜¯**å†…å®¹ç†è§£+ç­–ç•¥é€‰æ‹©**çš„æ™ºèƒ½æ€»ç»“ã€‚

**å…³é”®åˆ›æ–°**ï¼šAIè‡ªä¸»é€‰æ‹©æ€»ç»“ç­–ç•¥

```python
# ç­–ç•¥åˆ¤æ–­ç³»ç»Ÿ
"""
**æ€»ç»“ç­–ç•¥åˆ¤æ–­ï¼š**
1. **æ·±åº¦æ€»ç»“**ï¼ˆé€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼‰ï¼š
   - æŠ€æœ¯æ–‡æ¡£ã€æ•™ç¨‹ã€å­¦æœ¯æ–‡ç« 
   - é•¿ç¯‡åˆ†æã€ç ”ç©¶æŠ¥å‘Š
   - å¤æ‚çš„ä¸šåŠ¡æµç¨‹è¯´æ˜
   - åŒ…å«å¤šä¸ªè¦ç‚¹çš„è¯¦ç»†å†…å®¹

2. **ç®€å•æ¦‚æ‹¬**ï¼ˆé€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼‰ï¼š
   - æ–°é—»èµ„è®¯ã€ç®€çŸ­æ–‡ç« 
   - å•ä¸€ä¸»é¢˜çš„ç®€å•è¯´æ˜
   - ä¸ªäººç¬”è®°ã€éšæƒ³
   - å†…å®¹æœ¬èº«å°±æ¯”è¾ƒç®€æ´
"""

# é‡åŒ–æŒ‡æ ‡
"""
**æ€»ç»“è¦æ±‚ï¼š**
- æ·±åº¦æ€»ç»“ï¼š200-300å­—ï¼ŒåŒ…å«ä¸»è¦è§‚ç‚¹ã€å…³é”®ç»†èŠ‚ã€ç»“è®º
- ç®€å•æ¦‚æ‹¬ï¼š50-100å­—ï¼Œæç‚¼æ ¸å¿ƒè¦ç‚¹
- ä¿æŒå®¢è§‚å‡†ç¡®ï¼Œä¸æ·»åŠ ä¸ªäººè§‚ç‚¹
- ä½¿ç”¨æ¸…æ™°çš„ä¸­æ–‡è¡¨è¾¾
- å¦‚æœæ˜¯æŠ€æœ¯å†…å®¹ï¼Œä¿ç•™é‡è¦çš„æŠ€æœ¯æœ¯è¯­
"""
```

**æŠ€å·§åˆ†æ**ï¼š
- **è‡ªé€‚åº”ç­–ç•¥**ï¼šè®©AIæ ¹æ®å†…å®¹ç‰¹ç‚¹é€‰æ‹©å¤„ç†æ·±åº¦
- **é‡åŒ–çº¦æŸ**ï¼šæ˜ç¡®å­—æ•°èŒƒå›´ï¼Œæ§åˆ¶è¾“å‡ºè´¨é‡
- **é¢†åŸŸä¿æŒ**ï¼šæŠ€æœ¯æœ¯è¯­çš„ä¿ç•™ç¡®ä¿ä¸“ä¸šæ€§
- **å®¢è§‚æ€§è¦æ±‚**ï¼šé¿å…AIæ·»åŠ ä¸»è§‚åˆ¤æ–­

#### 1.3 æ ¼å¼åŒ–çš„å®Œæ•´æ€§ä¿è¯æç¤ºè¯

**æ ¸å¿ƒæŒ‘æˆ˜**ï¼šå¦‚ä½•è®©AIæ—¢ä¼˜åŒ–æ ¼å¼ï¼Œåˆä¿è¯å†…å®¹å®Œæ•´æ€§ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼šåŸåˆ™ä¼˜å…ˆçº§è®¾è®¡

```python
# æ ¸å¿ƒåŸåˆ™çš„ä¼˜å…ˆçº§æ’åº
"""
**æ ¸å¿ƒåŸåˆ™ï¼š**
1. **å®Œæ•´ä¿ç•™åŸæ–‡å†…å®¹** - ç»å¯¹ä¸èƒ½åˆ é™¤ã€ä¿®æ”¹æˆ–çœç•¥ä»»ä½•åŸå§‹ä¿¡æ¯
2. **å…ˆåŸæ–‡åæ€»ç»“** - è¿™æ˜¯ç¬”è®°ä¿å­˜ï¼ŒåŸæ–‡æ˜¯æœ€é‡è¦çš„
3. **ä¼˜åŒ–å¯è¯»æ€§** - é€šè¿‡æ ¼å¼åŒ–æå‡é˜…è¯»ä½“éªŒ
"""

# å…·ä½“æ“ä½œçš„è´Ÿé¢çº¦æŸ
"""
**æ ¼å¼åŒ–è§„åˆ™ï¼š**
1. **ä¿æŒåŸæ–‡å®Œæ•´æ€§**ï¼š
   - æ‰€æœ‰åŸå§‹æ–‡å­—å¿…é¡»å®Œæ•´ä¿ç•™
   - ä¸è¦æ”¹å†™æˆ–ç®€åŒ–ä»»ä½•å†…å®¹
   - ä¿æŒåŸä½œè€…çš„è¡¨è¾¾æ–¹å¼å’Œè¯­æ°”

2. **ç»“æ„åŒ–ç»„ç»‡**ï¼š
   - è¯†åˆ«å¹¶åˆ›å»ºåˆé€‚çš„æ ‡é¢˜å±‚çº§ï¼ˆ# ## ###ï¼‰
   - å°†ç›¸å…³å†…å®¹ç»„ç»‡æˆæ®µè½
   - ä½¿ç”¨åˆ—è¡¨ï¼ˆ- æˆ– 1.ï¼‰æ•´ç†è¦ç‚¹
   - ç”¨ä»£ç å—ï¼ˆ```ï¼‰åŒ…è£…ä»£ç ç‰‡æ®µ
   - ç”¨å¼•ç”¨å—ï¼ˆ>ï¼‰æ ‡è®°é‡è¦è§‚ç‚¹
"""
```

**è®¾è®¡äº®ç‚¹**ï¼š
- **åŸåˆ™ä¼˜å…ˆçº§**ï¼šæ˜ç¡®ä»€ä¹ˆæœ€é‡è¦ï¼Œé¿å…AIè¿‡åº¦ä¼˜åŒ–
- **è´Ÿé¢çº¦æŸ**ï¼šæ˜ç¡®å‘Šè¯‰AIä»€ä¹ˆä¸èƒ½åš
- **æ­£é¢æŒ‡å¯¼**ï¼šå…·ä½“çš„Markdownæ ¼å¼åŒ–æŒ‡ä»¤
- **ç¤ºä¾‹æ”¯æ’‘**ï¼šæ¯ç§æ ¼å¼éƒ½æœ‰å…·ä½“çš„Markdownè¯­æ³•

### 1.4 æ™ºèƒ½æ–‡ä»¶å‘½åçš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥

**è®¾è®¡ç›®æ ‡**ï¼šç”Ÿæˆæ—¢ç®€æ´åˆè¯­ä¹‰åŒ–çš„æ–‡ä»¶å

**ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç­–ç•¥**ï¼š

```python
# URLç±»å‹çš„ä¸Šä¸‹æ–‡å¢å¼º
if content_type == "url":
    title_info = f"\n\nåŸç½‘é¡µæ ‡é¢˜ï¼š{original_title}" if original_title else ""
    prompt = f"""ä½ æ˜¯ä¸€ä¸ªæ–‡ä»¶å‘½ååŠ©æ‰‹ã€‚è¯·æ ¹æ®ç½‘é¡µå†…å®¹ç”Ÿæˆä¸€ä¸ªç®€æ´çš„æ–‡ä»¶åã€‚{title_info}

è¦æ±‚ï¼š
1. é•¿åº¦æ§åˆ¶åœ¨10ä¸ªå­—ç¬¦ä»¥å†…ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰
2. èƒ½å¤Ÿæ¦‚æ‹¬ä¸»è¦å†…å®¹
3. åªè¿”å›æ–‡ä»¶åï¼Œä¸è¦å…¶ä»–å†…å®¹
4. ä½¿ç”¨ä¸­æ–‡æˆ–è‹±æ–‡ï¼Œé¿å…ç‰¹æ®Šå­—ç¬¦
5. å¦‚æœæ˜¯æŠ€æœ¯æ–‡æ¡£ï¼Œå¯ä»¥åŒ…å«æŠ€æœ¯å…³é”®è¯
6. ä¼˜å…ˆè€ƒè™‘åŸç½‘é¡µæ ‡é¢˜çš„å…³é”®ä¿¡æ¯

ç¤ºä¾‹ï¼š
- æ–°é—»ç±»ï¼šè´¢ç»æ–°é—»ã€ç§‘æŠ€èµ„è®¯
- æŠ€æœ¯ç±»ï¼šPythonæ•™ç¨‹ã€APIæ–‡æ¡£
- ç”Ÿæ´»ç±»ï¼šç¾é£Ÿæ”»ç•¥ã€æ—…æ¸¸æŒ‡å—"""

# ç¬”è®°ç±»å‹çš„ä¸»é¢˜æå–
else:  # note
    prompt = """ä½ æ˜¯ä¸€ä¸ªæ–‡ä»¶å‘½ååŠ©æ‰‹ã€‚è¯·æ ¹æ®ç¬”è®°å†…å®¹ç”Ÿæˆä¸€ä¸ªç®€æ´çš„æ–‡ä»¶åã€‚
è¦æ±‚ï¼š
1. é•¿åº¦æ§åˆ¶åœ¨10ä¸ªå­—ç¬¦ä»¥å†…ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰
2. èƒ½å¤Ÿæ¦‚æ‹¬ä¸»è¦å†…å®¹
3. åªè¿”å›æ–‡ä»¶åï¼Œä¸è¦å…¶ä»–å†…å®¹
4. ä½¿ç”¨ä¸­æ–‡æˆ–è‹±æ–‡ï¼Œé¿å…ç‰¹æ®Šå­—ç¬¦
5. çªå‡ºé‡ç‚¹ä¸»é¢˜

ç¤ºä¾‹ï¼š
- å­¦ä¹ ç¬”è®°ï¼šFastAPIå­¦ä¹ ã€æ•°æ®åº“è®¾è®¡
- å·¥ä½œè®°å½•ï¼šé¡¹ç›®æ€»ç»“ã€ä¼šè®®çºªè¦
- ä¸ªäººæƒ³æ³•ï¼šè¯»ä¹¦å¿ƒå¾—ã€ç”Ÿæ´»æ„Ÿæ‚Ÿ"""
```

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š
- **ä¸Šä¸‹æ–‡èåˆ**ï¼šç½‘é¡µæ ‡é¢˜ä½œä¸ºé¢å¤–ä¿¡æ¯
- **ç±»å‹ç‰¹åŒ–**ï¼šä¸åŒå†…å®¹ç±»å‹ä½¿ç”¨ä¸åŒç­–ç•¥
- **çº¦æŸæ˜ç¡®**ï¼šé•¿åº¦ã€å­—ç¬¦ã€è¯­è¨€çš„å¤šé‡çº¦æŸ
- **ç¤ºä¾‹ä¸°å¯Œ**ï¼šè¦†ç›–å¤šä¸ªåº”ç”¨åœºæ™¯

## ç¬¬äºŒéƒ¨åˆ†ï¼šæ™ºèƒ½å†³ç­–æ ‘ä¸å·¥ä½œæµç¼–æ’

### 2.1 ä¸»å·¥ä½œæµçš„å†³ç­–é€»è¾‘

æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ª**å¤šå±‚æ™ºèƒ½å†³ç­–æ ‘**ï¼Œæ¯ä¸€å±‚éƒ½æœ‰å®Œå–„çš„å®¹é”™æœºåˆ¶ã€‚

**å†³ç­–æ ‘ç»“æ„**ï¼š

```
ç”¨æˆ·è¾“å…¥
    â†“
è¾“å…¥éªŒè¯ï¼ˆé•¿åº¦ã€æ ¼å¼ã€å®‰å…¨æ€§ï¼‰
    â†“
AIå†…å®¹åˆ†æï¼ˆæ„å›¾ç†è§£ï¼‰
    â†“
å†³ç­–åˆ†æ”¯
    â”œâ”€ URLåˆ†æ”¯
    â”‚   â”œâ”€ å•URLå¤„ç†
    â”‚   â””â”€ å¤šURLå¹¶å‘å¤„ç†
    â””â”€ ç¬”è®°åˆ†æ”¯
        â””â”€ æ ¼å¼åŒ–å¤„ç†
    â†“
ç»“æœæ•´åˆä¸è¾“å‡º
```

**æ ¸å¿ƒå†³ç­–ä»£ç å‰–æ**ï¼š

```python
# ç¬¬ä¸€å±‚ï¼šè¾“å…¥éªŒè¯å’Œé¢„å¤„ç†
async def process_content(request: ContentRequest):
    content = request.content.strip()
    
    # å¤šç»´åº¦è¾“å…¥éªŒè¯
    if not content:
        raise HTTPException(status_code=400, detail="å†…å®¹ä¸èƒ½ä¸ºç©º")
    if len(content) > 10000:
        raise HTTPException(status_code=400, detail="å†…å®¹è¿‡é•¿ï¼Œè¯·æ§åˆ¶åœ¨10000å­—ç¬¦ä»¥å†…")

    # ç¬¬äºŒå±‚ï¼šAIå†…å®¹åˆ†æ
    content_analysis = await ai_service.judge_content_type(content)
    content_type = content_analysis["type"]
    urls = content_analysis["urls"]
    
    # è°ƒè¯•ä¿¡æ¯ï¼šå®Œæ•´çš„å†³ç­–è¿½è¸ª
    print(f"ğŸ” AI å†…å®¹åˆ†æç»“æœ:")
    print(f"   ç±»å‹: {content_type}")
    print(f"   URL æ•°é‡: {len(urls)}")
    print(f"   URL åˆ—è¡¨: {urls}")
    print(f"   åˆ¤æ–­ç†ç”±: {content_analysis.get('reason', 'æ— ')}")
```

**è®¾è®¡äº®ç‚¹**ï¼š
- **åˆ†å±‚éªŒè¯**ï¼šä»åŸºç¡€æ ¼å¼åˆ°AIç†è§£çš„å¤šå±‚éªŒè¯
- **å®Œæ•´è¿½è¸ª**ï¼šæ¯ä¸ªå†³ç­–ç‚¹éƒ½æœ‰è¯¦ç»†çš„æ—¥å¿—è®°å½•
- **çŠ¶æ€é€æ˜**ï¼šå‘ç”¨æˆ·å±•ç¤ºAIçš„åˆ¤æ–­è¿‡ç¨‹
- **é”™è¯¯å‹å¥½**ï¼šæ¯ä¸ªå¼‚å¸¸éƒ½æœ‰æ˜ç¡®çš„ç”¨æˆ·æç¤º

### 2.2 URLå¤„ç†çš„æ™ºèƒ½åˆ†æµ

**å•URL vs å¤šURLçš„è‡ªåŠ¨è¯†åˆ«**ï¼š

```python
if content_type == "url":
    if len(urls) == 1:
        # å•URLå¤„ç†æµæ°´çº¿
        url = urls[0]
        print(f"\nğŸ”„ å•ä¸ª URL å¤„ç†:")
        print(f"   URL: '{url}'")
        print(f"   URL ç±»å‹: {type(url)}")
        print(f"   URL é•¿åº¦: {len(url)}")
        print(f"   URL repr: {repr(url)}")

        # å¤„ç†é“¾ï¼šæŠ“å– â†’ æ€»ç»“ â†’ å‘½å â†’ ä¿å­˜
        scrape_result = await firecrawl_service.scrape_url(url)
        
        if scrape_result["success"]:
            summary = await ai_service.summarize_content(scrape_result["markdown"])
            original_title = scrape_result.get("metadata", {}).get("title", "")
            smart_name = await ai_service.generate_smart_filename(
                scrape_result["markdown"], "url", original_title
            )
            file_path = await FileService.save_url_content(
                scrape_result["markdown"], summary, url, None, smart_name
            )
            
    elif len(urls) > 1:
        # å¤šURLå¹¶å‘å¤„ç†æµæ°´çº¿
        print(f"\nğŸ”„ å¼€å§‹å¤„ç† {len(urls)} ä¸ª URL:")
        file_paths = []
        success_count = 0
        error_messages = []

        for i, url in enumerate(urls):
            print(f"\nğŸ“‹ å¤„ç†ç¬¬ {i+1}/{len(urls)} ä¸ª URL:")
            
            try:
                # ç‹¬ç«‹å¤„ç†æ¯ä¸ªURLï¼Œé”™è¯¯éš”ç¦»
                scrape_result = await firecrawl_service.scrape_url(url)
                
                if scrape_result["success"]:
                    # å®Œæ•´çš„å¤„ç†æµæ°´çº¿
                    summary = await ai_service.summarize_content(scrape_result["markdown"])
                    original_title = scrape_result.get("metadata", {}).get("title", "")
                    smart_name = await ai_service.generate_smart_filename(
                        scrape_result["markdown"], "url", original_title
                    )
                    file_path = await FileService.save_url_content(
                        scrape_result["markdown"], summary, url, None, smart_name
                    )
                    
                    file_paths.append(file_path)
                    success_count += 1
                else:
                    error_messages.append(f"URL {i+1} æŠ“å–å¤±è´¥: {scrape_result.get('error')}")
                    
            except Exception as e:
                error_messages.append(f"URL {i+1} å¤„ç†å¼‚å¸¸: {str(e)}")

        # ç»“æœèšåˆå’Œåé¦ˆ
        if success_count > 0:
            message = f"æˆåŠŸå¤„ç† {success_count}/{len(urls)} ä¸ªURL"
            if error_messages:
                message += f"ï¼Œå¤±è´¥ä¿¡æ¯: {'; '.join(error_messages)}"
```

**å…³é”®è®¾è®¡åŸåˆ™**ï¼š
- **é”™è¯¯éš”ç¦»**ï¼šå•ä¸ªURLå¤±è´¥ä¸å½±å“å…¶ä»–URLå¤„ç†
- **è¯¦ç»†è¿½è¸ª**ï¼šæ¯ä¸ªURLçš„å¤„ç†çŠ¶æ€éƒ½æœ‰å®Œæ•´è®°å½•
- **ç»“æœèšåˆ**ï¼šæœ€ç»ˆæä¾›ç»Ÿä¸€çš„æˆåŠŸ/å¤±è´¥ç»Ÿè®¡
- **ç”¨æˆ·å‹å¥½**ï¼šæ¸…æ™°çš„è¿›åº¦åé¦ˆå’Œé”™è¯¯è¯´æ˜

### 2.3 ç¬”è®°å¤„ç†çš„å®Œæ•´æ€§ä¿è¯

**ç¬”è®°å¤„ç†çš„ç‰¹æ®ŠæŒ‘æˆ˜**ï¼š
- ç”¨æˆ·çš„åŸå§‹å†…å®¹å¯èƒ½æ ¼å¼æ··ä¹±
- éœ€è¦ä¿ç•™å®Œæ•´ä¿¡æ¯çš„åŒæ—¶ä¼˜åŒ–å¯è¯»æ€§
- ç”Ÿæˆæœ‰ä»·å€¼çš„æ€»ç»“è€Œä¸ä¸¢å¤±ç»†èŠ‚

**å¤„ç†æµæ°´çº¿è®¾è®¡**ï¼š

```python
else:  # noteåˆ†æ”¯
    print(f"\nğŸ“ ç¬”è®°å†…å®¹å¤„ç†:")
    print(f"   åŸå§‹å†…å®¹é•¿åº¦: {len(content)} å­—ç¬¦")

    # å…ˆæ ¼å¼åŒ–ï¼ˆä¿ç•™åŸæ–‡ï¼‰
    formatted_content = await ai_service.format_note_content(content)
    print(f"   æ ¼å¼åŒ–å®Œæˆ")

    # å†ç”Ÿæˆæ€»ç»“
    summary = await ai_service.summarize_content(content)
    print(f"   æ€»ç»“ç”Ÿæˆå®Œæˆ")

    # æœ€åæ™ºèƒ½å‘½å
    smart_name = await ai_service.generate_smart_filename(content, "note")
    print(f"   æ™ºèƒ½æ–‡ä»¶å: {smart_name}")

    # ä¿å­˜å®Œæ•´å†…å®¹ï¼ˆåŸæ–‡ + æ ¼å¼åŒ– + æ€»ç»“ï¼‰
    file_path = await FileService.save_note_content(
        content,           # åŸå§‹å†…å®¹
        formatted_content, # æ ¼å¼åŒ–å†…å®¹
        summary,          # æ™ºèƒ½æ€»ç»“
        None,
        smart_name
    )
```

**è¾“å‡ºæ–‡ä»¶çš„ç»“æ„åŒ–è®¾è®¡**ï¼š

```python
# ç¬”è®°æ–‡ä»¶çš„æ ‡å‡†æ¨¡æ¿
full_content = f"""# ç¬”è®°

**åˆ›å»ºæ—¶é—´**: {datetime.now().strftime("%Y-%m-%d %H:%M:%S")}

## å†…å®¹æ€»ç»“
{summary}

---

## åŸå§‹å†…å®¹
{formatted_content}

---

## åŸæ–‡å¤‡ä»½
```
{original_content}
```
"""
```

**è®¾è®¡ç‰¹è‰²**ï¼š
- **ä¸‰å±‚ä¿æŠ¤**ï¼šæ€»ç»“ + æ ¼å¼åŒ– + åŸæ–‡å¤‡ä»½
- **æ—¶é—´æ ‡è®°**ï¼šè®°å½•å†…å®¹çš„åˆ›å»ºæ—¶é—´
- **ç»“æ„æ¸…æ™°**ï¼šæ˜ç¡®çš„åˆ†èŠ‚å’Œæ ‡è¯†
- **å¯è¯»æ€§ä¼˜å…ˆ**ï¼šMarkdownæ ¼å¼ä¾¿äºåç»­ç¼–è¾‘

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¤šæ¨¡æ€å†…å®¹å¤„ç†å¼•æ“

### 3.1 å›¾ç‰‡å¤„ç†çš„å¤šå±‚æ¬¡è®¾è®¡

HebeCrawlä¸ä»…å¤„ç†æ–‡æœ¬å†…å®¹ï¼Œè¿˜æä¾›äº†å®Œæ•´çš„å›¾ç‰‡å¤„ç†æ–¹æ¡ˆã€‚è¿™é‡Œçš„è®¾è®¡å“²å­¦æ˜¯**å®‰å…¨ç¬¬ä¸€ï¼Œä½“éªŒä¼˜åŒ–**ã€‚

**å¤šæ¥å£è®¾è®¡ç­–ç•¥**ï¼š

```python
# 1. æ ‡å‡†å›¾ç‰‡ä¸Šä¼ æ¥å£
@app.post("/upload-image")
async def upload_image(file: UploadFile = File(...)):
    """æ ‡å‡†çš„å›¾ç‰‡ä¸Šä¼ ï¼ŒåŒ…å«å®Œæ•´çš„éªŒè¯å’Œå¤„ç†"""

# 2. iOSå¿«æ·æŒ‡ä»¤ä¼˜åŒ–æ¥å£
@app.post("/ios-upload")  
async def ios_upload_image(file: UploadFile = File(...)):
    """ä¸“ä¸ºiOSå¿«æ·æŒ‡ä»¤ä¼˜åŒ–ï¼Œæ”¯æŒæ›´å®½æ¾çš„æ–‡ä»¶ç±»å‹æ£€æµ‹"""

# 3. ç®€åŒ–ä¸Šä¼ æ¥å£
@app.post("/simple-upload")
async def simple_upload_image(file: UploadFile = File(...)):
    """æœ€ç®€åŒ–çš„æ¥å£ï¼Œè¿”å›ç®€å•JSONæ ¼å¼"""

# 4. æ‰¹é‡ä¸Šä¼ æ¥å£
@app.post("/multi-upload")
async def multi_upload_images(files: List[UploadFile] = File(...)):
    """æ”¯æŒä¸€æ¬¡ä¸Šä¼ å¤šå¼ å›¾ç‰‡"""
```

**æ–‡ä»¶ç±»å‹æ£€æµ‹çš„å®‰å…¨ç­–ç•¥**ï¼š

```python
def detect_image_type(data: bytes) -> str:
    """é€šè¿‡æ–‡ä»¶å¤´æ£€æµ‹å›¾ç‰‡ç±»å‹ï¼ˆæ¯”æ–‡ä»¶æ‰©å±•åæ›´å®‰å…¨ï¼‰"""
    if data.startswith(b'\xff\xd8\xff'):
        return 'jpg'
    elif data.startswith(b'\x89PNG\r\n\x1a\n'):
        return 'png'
    elif data.startswith(b'GIF87a') or data.startswith(b'GIF89a'):
        return 'gif'
    elif data.startswith(b'RIFF') and b'WEBP' in data[:12]:
        return 'webp'
    elif data.startswith(b'\x00\x00\x01\x00') or data.startswith(b'\x00\x00\x02\x00'):
        return 'ico'
    elif data.startswith(b'BM'):
        return 'bmp'
    else:
        return None
```

**æŠ€æœ¯äº®ç‚¹**ï¼š
- **æ–‡ä»¶å¤´æ£€æµ‹**ï¼šæ¯”æ‰©å±•åæ£€æµ‹æ›´å®‰å…¨å¯é 
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šè¦†ç›–å¸¸è§çš„å›¾ç‰‡æ ¼å¼
- **å®‰å…¨ä¼˜å…ˆ**ï¼šé˜²æ­¢æ¶æ„æ–‡ä»¶ä¸Šä¼ 
- **æ€§èƒ½è€ƒè™‘**ï¼šåªè¯»å–æ–‡ä»¶å¤´ï¼Œä¸åŠ è½½å®Œæ•´æ–‡ä»¶

### 3.2 æ™ºèƒ½æ–‡ä»¶å‘½åç³»ç»Ÿ

**æ—¶é—´æˆ³ + è¯­ä¹‰åŒ–çš„å‘½åç­–ç•¥**ï¼š

```python
def generate_filename(content_type: str, smart_name: str = None) -> str:
    """ç”Ÿæˆè¯­ä¹‰åŒ–çš„æ–‡ä»¶å"""
    date_str = datetime.now().strftime("%Y%m%d")
    
    if smart_name:
        # AIç”Ÿæˆçš„æ™ºèƒ½æ–‡ä»¶å
        return f"{date_str}_{smart_name}"
    else:
        # é»˜è®¤æ–‡ä»¶å
        return f"{date_str}_{content_type}"

# å›¾ç‰‡æ–‡ä»¶çš„ç‰¹æ®Šå‘½å
filename = f"{date_str}_{time_str}_{safe_filename}"
```

**å‘½åè§„åˆ™çš„è®¾è®¡è€ƒè™‘**ï¼š
- **æ—¶é—´å‰ç¼€**ï¼šä¾¿äºæŒ‰æ—¶é—´æ’åºå’ŒæŸ¥æ‰¾
- **è¯­ä¹‰åŒ–**ï¼šAIç”Ÿæˆçš„æœ‰æ„ä¹‰çš„åç§°
- **å®‰å…¨æ€§**ï¼šç§»é™¤ç‰¹æ®Šå­—ç¬¦ï¼Œé¿å…æ–‡ä»¶ç³»ç»Ÿé—®é¢˜
- **å”¯ä¸€æ€§**ï¼šæ—¶é—´æˆ³ç¡®ä¿æ–‡ä»¶åä¸å†²çª

### 3.3 åˆ†ç±»å­˜å‚¨çš„ç»„ç»‡æ¶æ„

**ç›®å½•ç»“æ„çš„æ·±åº¦è®¾è®¡**ï¼š

```
hebecrawl/
â”œâ”€â”€ mark/          # URLæŠ“å–å†…å®¹ï¼ˆç»“æ„åŒ–ç½‘é¡µä¿¡æ¯ï¼‰
â”œâ”€â”€ note/          # ç¬”è®°å†…å®¹ï¼ˆæ ¼å¼åŒ–çš„æ–‡æœ¬ä¿¡æ¯ï¼‰  
â”œâ”€â”€ photo/         # å›¾ç‰‡æ–‡ä»¶ï¼ˆå¤šåª’ä½“èµ„æºï¼‰
â””â”€â”€ static/        # å‰ç«¯é™æ€æ–‡ä»¶
```

**å­˜å‚¨æ¨¡æ¿çš„æ ‡å‡†åŒ–**ï¼š

```python
# URLå†…å®¹çš„æ ‡å‡†æ¨¡æ¿
url_template = f"""# ç½‘é¡µå†…å®¹æ‘˜è¦

**URL**: {url}
**æŠ“å–æ—¶é—´**: {datetime.now().strftime("%Y-%m-%d %H:%M:%S")}

## å†…å®¹æ€»ç»“
{summary}

---

## åŸå§‹å†…å®¹
{markdown_content}
"""

# ç¬”è®°å†…å®¹çš„æ ‡å‡†æ¨¡æ¿  
note_template = f"""# ç¬”è®°

**åˆ›å»ºæ—¶é—´**: {datetime.now().strftime("%Y-%m-%d %H:%M:%S")}

## å†…å®¹æ€»ç»“
{summary}

---

## åŸå§‹å†…å®¹
{formatted_content}

---

## åŸæ–‡å¤‡ä»½
```
{original_content}
```
"""
```

**æ¨¡æ¿è®¾è®¡çš„æ€è€ƒ**ï¼š
- **å…ƒæ•°æ®è®°å½•**ï¼šæ—¶é—´ã€æ¥æºç­‰é‡è¦ä¿¡æ¯
- **å†…å®¹åˆ†å±‚**ï¼šæ€»ç»“ã€æ ¼å¼åŒ–ã€åŸæ–‡çš„å±‚æ¬¡ç»“æ„
- **å¯æ‰©å±•æ€§**ï¼šæ¨¡æ¿åŒ–è®¾è®¡ä¾¿äºåç»­åŠŸèƒ½æ‰©å±•
- **å·¥å…·å…¼å®¹**ï¼šMarkdownæ ¼å¼ä¸å„ç§å·¥å…·å…¼å®¹

## ç¬¬å››éƒ¨åˆ†ï¼šAIå®¹é”™ä¸é…ç½®ç®¡ç†

### 4.1 æ™ºèƒ½é…ç½®ç®¡ç†ç³»ç»Ÿ

**å¤šé…ç½®çš„è‡ªåŠ¨åˆ‡æ¢æœºåˆ¶**æ˜¯æ•´ä¸ªç³»ç»Ÿç¨³å®šæ€§çš„æ ¸å¿ƒä¿éšœã€‚

**é…ç½®ç®¡ç†å™¨çš„è®¾è®¡æ¶æ„**ï¼š

```python
class AIConfigManager:
    """AIé…ç½®ç®¡ç†å™¨ - æ”¯æŒä¸»é…ç½®å’Œå¤‡ä»½é…ç½®è‡ªåŠ¨åˆ‡æ¢"""
    
    def __init__(self):
        # ä¸»é…ç½®ï¼ˆä» .env è¯»å–ï¼‰
        self.primary_config = {
            "api_key": os.getenv("AI_API_KEY"),
            "base_url": os.getenv("AI_BASE_URL", "https://api.siliconflow.cn/v1"),
            "model": os.getenv("AI_MODEL", "deepseek-ai/DeepSeek-V3")
        }
        
        # å¤‡ä»½é…ç½®ï¼ˆä» .env è¯»å–å¤‡ä»½å˜é‡ï¼‰
        self.backup_config = {
            "api_key": os.getenv("AI_BACKUP_API_KEY"),
            "base_url": os.getenv("AI_BACKUP_BASE_URL", "https://api.siliconflow.cn/v1"),
            "model": os.getenv("AI_BACKUP_MODEL", "deepseek-ai/DeepSeek-V3")
        }
        
        # å½“å‰ä½¿ç”¨çš„é…ç½®
        self.current_config = self.primary_config.copy()
        self.using_backup = False
```

**é…ç½®å¥åº·æ£€æµ‹æœºåˆ¶**ï¼š

```python
async def test_config(self, config):
    """æµ‹è¯•é…ç½®æ˜¯å¦å¯ç”¨"""
    try:
        client = openai.OpenAI(
            api_key=config["api_key"],
            base_url=config["base_url"]
        )
        
        # è½»é‡çº§æµ‹è¯•è¯·æ±‚
        def sync_test():
            return client.chat.completions.create(
                model=config["model"],
                messages=[{"role": "user", "content": "test"}],
                max_tokens=5,
                timeout=10  # å¿«é€Ÿè¶…æ—¶æ£€æµ‹
            )
        
        await asyncio.to_thread(sync_test)
        return True
    except Exception as e:
        print(f"âŒ é…ç½®æµ‹è¯•å¤±è´¥: {str(e)}")
        return False
```

**è‡ªåŠ¨æ•…éšœè½¬ç§»é€»è¾‘**ï¼š

```python
async def ensure_working_config(self):
    """ç¡®ä¿ä½¿ç”¨å¯å·¥ä½œçš„é…ç½®"""
    # å¦‚æœå½“å‰ä½¿ç”¨ä¸»é…ç½®ï¼Œå…ˆæµ‹è¯•ä¸»é…ç½®
    if not self.using_backup:
        print("ğŸ” æµ‹è¯•ä¸»é…ç½®...")
        if await self.test_config(self.primary_config):
            print("âœ… ä¸»é…ç½®æ­£å¸¸")
            return self.current_config
        else:
            print("âŒ ä¸»é…ç½®å¤±è´¥ï¼Œåˆ‡æ¢åˆ°å¤‡ä»½é…ç½®")
            self.current_config = self.backup_config.copy()
            self.using_backup = True
    
    # æµ‹è¯•å¤‡ä»½é…ç½®
    print("ğŸ” æµ‹è¯•å¤‡ä»½é…ç½®...")
    if await self.test_config(self.backup_config):
        print("âœ… å¤‡ä»½é…ç½®æ­£å¸¸")
        return self.current_config
    else:
        print("âŒ å¤‡ä»½é…ç½®ä¹Ÿå¤±è´¥")
        raise Exception("æ‰€æœ‰AIé…ç½®éƒ½æ— æ³•ä½¿ç”¨")
```

**è®¾è®¡ç‰¹è‰²**ï¼š
- **åŒé…ç½®ä¿éšœ**ï¼šä¸»å¤‡é…ç½®ç¡®ä¿æœåŠ¡è¿ç»­æ€§
- **è‡ªåŠ¨æ£€æµ‹**ï¼šå®æ—¶å¥åº·æ£€æŸ¥ï¼Œä¸»åŠ¨å‘ç°é—®é¢˜
- **é€æ˜åˆ‡æ¢**ï¼šç”¨æˆ·æ— æ„ŸçŸ¥çš„é…ç½®åˆ‡æ¢
- **çŠ¶æ€è¿½è¸ª**ï¼šå®Œæ•´çš„é…ç½®çŠ¶æ€å’Œåˆ‡æ¢æ—¥å¿—

### 4.2 å¸¦é‡è¯•çš„AIè°ƒç”¨æ¡†æ¶

**å®¹é”™è°ƒç”¨çš„æ ¸å¿ƒè®¾è®¡**ï¼š

```python
async def _call_with_fallback(self, sync_call_func, operation_name="AIè°ƒç”¨"):
    """å¸¦å¤‡ä»½åˆ‡æ¢çš„AIè°ƒç”¨"""
    max_retries = 2
    
    for attempt in range(max_retries):
        try:
            # ç¡®ä¿ä½¿ç”¨å¯å·¥ä½œçš„é…ç½®
            if attempt > 0:
                await self.config_manager.ensure_working_config()
                self._init_client()  # é‡æ–°åˆå§‹åŒ–å®¢æˆ·ç«¯
            
            # æ‰§è¡Œè°ƒç”¨
            response = await asyncio.to_thread(sync_call_func)
            return response
            
        except Exception as e:
            print(f"âŒ {operation_name} å¤±è´¥ (å°è¯• {attempt + 1}/{max_retries}): {str(e)}")
            
            if attempt < max_retries - 1:
                # ä¸æ˜¯æœ€åä¸€æ¬¡å°è¯•ï¼Œåˆ‡æ¢é…ç½®
                if not self.config_manager.using_backup:
                    print("ğŸ”„ åˆ‡æ¢åˆ°å¤‡ä»½é…ç½®é‡è¯•...")
                    self.config_manager.switch_to_backup()
                else:
                    print("ğŸ”„ åˆ‡æ¢åˆ°ä¸»é…ç½®é‡è¯•...")
                    self.config_manager.switch_to_primary()
            else:
                # æœ€åä¸€æ¬¡å°è¯•ä¹Ÿå¤±è´¥äº†
                raise Exception(f"{operation_name} æ‰€æœ‰é…ç½®éƒ½å¤±è´¥: {str(e)}")
```

**è°ƒç”¨å°è£…çš„å®é™…åº”ç”¨**ï¼š

```python
# åœ¨å…·ä½“AIè°ƒç”¨ä¸­çš„ä½¿ç”¨
async def judge_content_type(self, content: str) -> dict:
    def sync_call():
        return self.client.chat.completions.create(
            model=self.config_manager.get_current_config()["model"],
            messages=[...],  # å…·ä½“çš„prompt
            max_tokens=300,
            temperature=0.1
        )
    
    # ä½¿ç”¨å¸¦å®¹é”™çš„è°ƒç”¨
    response = await self._call_with_fallback(sync_call, "å†…å®¹ç±»å‹åˆ¤æ–­")
    return self._parse_response(response)
```

**è®¾è®¡äº®ç‚¹**ï¼š
- **é€æ˜é‡è¯•**ï¼šä¸šåŠ¡ä»£ç æ— éœ€å…³å¿ƒé‡è¯•é€»è¾‘
- **æ™ºèƒ½åˆ‡æ¢**ï¼šå¤±è´¥æ—¶è‡ªåŠ¨å°è¯•ä¸åŒé…ç½®
- **æ“ä½œæ ‡è¯†**ï¼šæ¯ä¸ªæ“ä½œæœ‰æ˜ç¡®çš„æ ‡è¯†ä¾¿äºè°ƒè¯•
- **å¼‚æ­¥é€‚é…**ï¼šåŒæ­¥AIè°ƒç”¨åœ¨å¼‚æ­¥æ¡†æ¶ä¸­çš„ä¼˜é›…å¤„ç†

### 4.3 å¤šå±‚é™çº§ç­–ç•¥

**å†…å®¹ç±»å‹åˆ¤æ–­çš„ä¸‰å±‚é™çº§**ï¼š

```python
async def judge_content_type(self, content: str) -> dict:
    try:
        # ç¬¬ä¸€å±‚ï¼šLLMæ™ºèƒ½åˆ†æ
        response = await self._call_with_fallback(sync_call, "å†…å®¹ç±»å‹åˆ¤æ–­")
        result_text = response.choices[0].message.content.strip()
        
        try:
            result = json.loads(result_text)
            # LLMåˆ†ææˆåŠŸï¼Œè¿›è¡ŒURLéªŒè¯
            if result.get("type") == "url" and "urls" in result:
                original_urls = result["urls"]
                valid_urls = self.simple_validate_urls(original_urls)
                result["urls"] = valid_urls
            return result
            
        except json.JSONDecodeError:
            # ç¬¬äºŒå±‚ï¼šJSONè§£æå¤±è´¥ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤‡ç”¨
            print(f"âŒ JSON è§£æå¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨é€»è¾‘...")
            url_pattern = r'https?://[^\s]+'
            urls = re.findall(url_pattern, content)
            valid_urls = self.simple_validate_urls(urls)
            
            if valid_urls:
                return {"type": "url", "urls": valid_urls, "reason": "JSONè§£æå¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨é€»è¾‘æ£€æµ‹åˆ°URL"}
            else:
                return {"type": "note", "urls": [], "reason": "JSONè§£æå¤±è´¥ï¼Œå¤‡ç”¨é€»è¾‘æœªæ£€æµ‹åˆ°æœ‰æ•ˆURLï¼Œåˆ¤æ–­ä¸ºç¬”è®°"}
                
    except Exception as e:
        # ç¬¬ä¸‰å±‚ï¼šAIè°ƒç”¨å®Œå…¨å¤±è´¥ï¼Œçº¯æ­£åˆ™è¡¨è¾¾å¼å¤„ç†
        print(f"âŒ AI åˆ¤æ–­å¼‚å¸¸: {e}ï¼Œä½¿ç”¨æœ€ç»ˆå¤‡ç”¨é€»è¾‘...")
        url_pattern = r'https?://[^\s]+'
        urls = re.findall(url_pattern, content)
        valid_urls = self.simple_validate_urls(urls)
        
        if valid_urls:
            return {"type": "url", "urls": valid_urls, "reason": f"AIåˆ¤æ–­å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨é€»è¾‘: {str(e)}"}
        else:
            return {"type": "note", "urls": [], "reason": f"AIåˆ¤æ–­å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨é€»è¾‘: {str(e)}"}
```

**URLéªŒè¯çš„é²æ£’æ€§è®¾è®¡**ï¼š

```python
def simple_validate_urls(self, urls):
    """ç®€å•éªŒè¯ LLM æå–çš„ URL åˆ—è¡¨"""
    valid_urls = []
    for url in urls:
        if not url or not isinstance(url, str):
            continue
            
        # åŸºæœ¬æ¸…ç†
        clean_url = url.strip()
        print(f"ğŸ”§ éªŒè¯ URL: '{clean_url}'")
        
        # åŸºæœ¬æ ¼å¼éªŒè¯
        if not clean_url.startswith(('http://', 'https://')):
            print(f"âŒ æ— æ•ˆåè®®: {clean_url}")
            continue
            
        # é•¿åº¦éªŒè¯
        if len(clean_url) < 10:
            print(f"âŒ URL å¤ªçŸ­: {clean_url}")
            continue
            
        # ä½¿ç”¨ urlparse éªŒè¯
        try:
            parsed = urlparse(clean_url)
            if parsed.netloc and parsed.scheme in ['http', 'https'] and '.' in parsed.netloc:
                valid_urls.append(clean_url)
                print(f"âœ… æœ‰æ•ˆ URL: {clean_url}")
            else:
                print(f"âŒ æ— æ•ˆ URL: {clean_url}")
        except Exception as e:
            print(f"âŒ URL è§£æå¼‚å¸¸: {clean_url} - {e}")
    
    print(f"ğŸ¯ éªŒè¯ç»“æœ: {len(valid_urls)}/{len(urls)} ä¸ªæœ‰æ•ˆ URL")
    return valid_urls
```

**é™çº§ç­–ç•¥çš„è®¾è®¡åŸåˆ™**ï¼š
- **å±‚æ¬¡æ¸…æ™°**ï¼šAI â†’ è§„åˆ™ â†’ å…œåº•çš„æ˜ç¡®å±‚æ¬¡
- **åŠŸèƒ½ä¿è¯**ï¼šå³ä½¿AIå®Œå…¨å¤±è´¥ï¼ŒåŸºç¡€åŠŸèƒ½ä»å¯ç”¨
- **ç”¨æˆ·é€æ˜**ï¼šç”¨æˆ·çœ‹åˆ°çš„æ˜¯ç»Ÿä¸€çš„ç»“æœæ ¼å¼
- **è°ƒè¯•å‹å¥½**ï¼šæ¯å±‚é™çº§éƒ½æœ‰è¯¦ç»†çš„æ—¥å¿—è®°å½•

## ç¬¬äº”éƒ¨åˆ†ï¼šå‰ç«¯ç•Œé¢çš„æ™ºèƒ½äº¤äº’è®¾è®¡

### 5.1 é›¶é…ç½®çš„ç”¨æˆ·ä½“éªŒ

**è®¾è®¡ç†å¿µ**ï¼šè®©ç”¨æˆ·ä¸“æ³¨äºå†…å®¹ï¼Œè€Œä¸æ˜¯å·¥å…·é…ç½®ã€‚

**ç»Ÿä¸€è¾“å…¥æ¡†çš„äº¤äº’é€»è¾‘**ï¼š

```javascript
// æ™ºèƒ½æäº¤å¤„ç†
async function submitContent() {
    const content = document.getElementById('content').value.trim();
    
    // å‰ç«¯åŸºç¡€éªŒè¯
    if (!content) {
        showStatus('è¯·è¾“å…¥å†…å®¹', 'error');
        return;
    }
    
    if (content.length > 10000) {
        showStatus('å†…å®¹è¿‡é•¿ï¼Œè¯·æ§åˆ¶åœ¨10000å­—ç¬¦ä»¥å†…', 'error');
        return;
    }
    
    // æ˜¾ç¤ºå¤„ç†çŠ¶æ€
    showStatus('æ­£åœ¨æ™ºèƒ½åˆ†æå†…å®¹ç±»å‹...', 'info');
    
    try {
        const response = await fetch('/process-content', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ content: content })
        });
        
        const result = await response.json();
        
        if (result.success) {
            // æˆåŠŸå¤„ç†
            showStatus(`å¤„ç†æˆåŠŸï¼æ–‡ä»¶å·²ä¿å­˜åˆ°: ${result.file_path}`, 'success');
            
            // å¦‚æœæ˜¯å¤šæ–‡ä»¶ï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
            if (result.file_paths && result.file_paths.length > 1) {
                const fileList = result.file_paths.map(path => `â€¢ ${path}`).join('\n');
                showStatus(`${result.message}\n\nä¿å­˜çš„æ–‡ä»¶ï¼š\n${fileList}`, 'success');
            }
        } else {
            showStatus(`å¤„ç†å¤±è´¥: ${result.message}`, 'error');
        }
        
    } catch (error) {
        showStatus(`ç½‘ç»œé”™è¯¯: ${error.message}`, 'error');
    }
}
```

**å®æ—¶çŠ¶æ€åé¦ˆç³»ç»Ÿ**ï¼š

```javascript
// çŠ¶æ€æ˜¾ç¤ºçš„ç”¨æˆ·ä½“éªŒä¼˜åŒ–
function showStatus(message, type = 'info') {
    const statusDiv = document.getElementById('status');
    const timestamp = new Date().toLocaleTimeString();
    
    // æ ¹æ®ç±»å‹è®¾ç½®ä¸åŒçš„å›¾æ ‡å’Œæ ·å¼
    const icons = {
        'info': 'ğŸ”„',
        'success': 'âœ…', 
        'error': 'âŒ',
        'warning': 'âš ï¸'
    };
    
    statusDiv.innerHTML = `
        <div class="status-${type}">
            ${icons[type]} ${message}
            <small class="timestamp">${timestamp}</small>
        </div>
    `;
    
    // è‡ªåŠ¨æ»šåŠ¨åˆ°çŠ¶æ€åŒºåŸŸ
    statusDiv.scrollIntoView({ behavior: 'smooth' });
    
    // æˆåŠŸçŠ¶æ€è‡ªåŠ¨æ¸…é™¤
    if (type === 'success') {
        setTimeout(() => {
            statusDiv.innerHTML = '';
        }, 5000);
    }
}
```

### 5.2 æ‹–æ‹½ä¸Šä¼ çš„äº¤äº’ä¼˜åŒ–

**å¤šç§ä¸Šä¼ æ–¹å¼çš„ç»Ÿä¸€å¤„ç†**ï¼š

```javascript
// æ‹–æ‹½ä¸Šä¼ çš„å®Œæ•´å®ç°
function setupDragAndDrop() {
    const dropZone = document.getElementById('imageUpload');
    
    // æ‹–æ‹½è¿›å…¥
    dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.classList.add('drag-over');
        dropZone.style.borderColor = '#007bff';
        dropZone.style.backgroundColor = '#f8f9fa';
    });
    
    // æ‹–æ‹½ç¦»å¼€
    dropZone.addEventListener('dragleave', (e) => {
        e.preventDefault();
        dropZone.classList.remove('drag-over');
        dropZone.style.borderColor = '#ced4da';
        dropZone.style.backgroundColor = 'white';
    });
    
    // æ–‡ä»¶æ”¾ä¸‹
    dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('drag-over');
        dropZone.style.borderColor = '#ced4da';
        dropZone.style.backgroundColor = 'white';
        
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            handleImageUpload(files[0]);
        }
    });
}

// ç»Ÿä¸€çš„å›¾ç‰‡ä¸Šä¼ å¤„ç†
async function handleImageUpload(file) {
    // å®¢æˆ·ç«¯éªŒè¯
    if (!file.type.startsWith('image/')) {
        showStatus('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶', 'error');
        return;
    }
    
    if (file.size > 10 * 1024 * 1024) {
        showStatus('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡10MB', 'error');
        return;
    }
    
    showStatus('æ­£åœ¨ä¸Šä¼ å›¾ç‰‡...', 'info');
    
    const formData = new FormData();
    formData.append('file', file);
    
    try {
        const response = await fetch('/upload-image', {
            method: 'POST',
            body: formData
        });
        
        const result = await response.json();
        
        if (result.success) {
            showStatus(`å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼ä¿å­˜è·¯å¾„: ${result.file_path}`, 'success');
        } else {
            showStatus(`ä¸Šä¼ å¤±è´¥: ${result.message}`, 'error');
        }
        
    } catch (error) {
        showStatus(`ä¸Šä¼ é”™è¯¯: ${error.message}`, 'error');
    }
}
```

### 5.3 å“åº”å¼è®¾è®¡çš„ç»†èŠ‚ä¼˜åŒ–

**ç§»åŠ¨ä¼˜å…ˆçš„CSSæ¶æ„**ï¼š

```css
/* åŸºç¡€ç§»åŠ¨ç«¯æ ·å¼ */
.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.form-group {
    margin-bottom: 20px;
}

.form-control {
    width: 100%;
    padding: 12px;
    border: 2px solid #ced4da;
    border-radius: 8px;
    font-size: 16px; /* é˜²æ­¢iOSç¼©æ”¾ */
    transition: border-color 0.3s ease;
}

.form-control:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

/* å“åº”å¼æ–­ç‚¹ */
@media (max-width: 768px) {
    .container {
        padding: 10px;
    }
    
    .btn {
        width: 100%;
        padding: 15px;
        font-size: 18px;
    }
    
    .status-message {
        font-size: 14px;
        word-break: break-word;
    }
}

@media (max-width: 480px) {
    .form-control {
        font-size: 16px;
        padding: 15px;
    }
    
    h1 {
        font-size: 24px;
        text-align: center;
    }
}
```

**äº¤äº’çŠ¶æ€çš„è§†è§‰åé¦ˆ**ï¼š

```css
/* çŠ¶æ€åé¦ˆçš„è§†è§‰è®¾è®¡ */
.status-info {
    color: #17a2b8;
    background-color: #d1ecf1;
    border: 1px solid #bee5eb;
    padding: 12px;
    border-radius: 6px;
    margin: 10px 0;
}

.status-success {
    color: #155724;
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    padding: 12px;
    border-radius: 6px;
    margin: 10px 0;
}

.status-error {
    color: #721c24;
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    padding: 12px;
    border-radius: 6px;
    margin: 10px 0;
}

/* ä¸Šä¼ åŒºåŸŸçš„äº¤äº’æ•ˆæœ */
.upload-zone {
    border: 2px dashed #ced4da;
    border-radius: 8px;
    padding: 40px 20px;
    text-align: center;
    transition: all 0.3s ease;
    cursor: pointer;
}

.upload-zone:hover {
    border-color: #007bff;
    background-color: #f8f9fa;
}

.upload-zone.drag-over {
    border-color: #28a745;
    background-color: #d4edda;
    transform: scale(1.02);
}
```

## ç¬¬å…­éƒ¨åˆ†ï¼šéƒ¨ç½²æ¶æ„ä¸è¿ç»´è®¾è®¡

### 6.1 DockeråŒ–çš„ç”Ÿäº§éƒ¨ç½²

**å¤šç¯å¢ƒé€‚é…çš„å¯åŠ¨ç­–ç•¥**ï¼š

```bash
#!/bin/bash
# start.sh - æ™ºèƒ½ç¯å¢ƒæ£€æµ‹å’Œå¯åŠ¨

echo "ğŸš€ HebeCrawl æ™ºèƒ½å¯åŠ¨ä¸­..."

# æ£€æµ‹Dockerç¯å¢ƒ
if command -v docker-compose &> /dev/null || command -v docker &> /dev/null; then
    echo "ğŸ³ æ£€æµ‹åˆ°Dockerç¯å¢ƒï¼Œä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²"
    
    # æ£€æŸ¥docker-composeæ–‡ä»¶
    if [ -f "docker-compose.yml" ]; then
        echo "ğŸ“‹ ä½¿ç”¨ docker-compose å¯åŠ¨..."
        docker-compose down 2>/dev/null  # æ¸…ç†æ—§å®¹å™¨
        docker-compose up --build -d
        
        if [ $? -eq 0 ]; then
            echo "âœ… æœåŠ¡å¯åŠ¨æˆåŠŸ!"
            echo "ğŸŒ è®¿é—®åœ°å€: http://localhost:3080"
            echo "ğŸ“– APIæ–‡æ¡£: http://localhost:3080/docs"
        else
            echo "âŒ Dockerå¯åŠ¨å¤±è´¥ï¼Œå°è¯•Pythonå¯åŠ¨..."
            python_start
        fi
    else
        echo "âŒ æœªæ‰¾åˆ° docker-compose.yml æ–‡ä»¶"
        python_start
    fi
else
    echo "ğŸ æœªæ£€æµ‹åˆ°Dockerç¯å¢ƒï¼Œä½¿ç”¨Pythonå¯åŠ¨"
    python_start
fi

# Pythonå¯åŠ¨å‡½æ•°
python_start() {
    echo "ğŸ” æ£€æŸ¥Pythonç¯å¢ƒ..."
    
    if command -v python3 &> /dev/null; then
        PYTHON_CMD="python3"
    elif command -v python &> /dev/null; then
        PYTHON_CMD="python"
    else
        echo "âŒ æœªæ‰¾åˆ°Pythonç¯å¢ƒï¼Œè¯·å…ˆå®‰è£…Python"
        exit 1
    fi
    
    echo "ğŸ“¦ å®‰è£…ä¾èµ–..."
    $PYTHON_CMD -m pip install -r requirements.txt
    
    if [ $? -eq 0 ]; then
        echo "ğŸ¯ å¯åŠ¨åº”ç”¨..."
        $PYTHON_CMD run.py
    else
        echo "âŒ ä¾èµ–å®‰è£…å¤±è´¥"
        exit 1
    fi
}

# ä¿¡å·å¤„ç†
trap 'echo "ğŸ›‘ æ­£åœ¨åœæ­¢æœåŠ¡..."; docker-compose down 2>/dev/null; exit 0' INT TERM
```

**Docker Composeçš„ç”Ÿäº§é…ç½®**ï¼š

```yaml
# docker-compose.yml
version: '3.8'

services:
  hebecrawl:
    build: 
      context: .
      dockerfile: Dockerfile
    container_name: hebecrawl_app
    ports:
      - "3080:8000"
    volumes:
      # æŒä¹…åŒ–æ•°æ®ç›®å½•
      - ./mark:/app/mark
      - ./note:/app/note
      - ./photo:/app/photo
      - ./static:/app/static
    environment:
      # AIé…ç½®
      - AI_API_KEY=${AI_API_KEY}
      - AI_BASE_URL=${AI_BASE_URL}
      - AI_MODEL=${AI_MODEL}
      # å¤‡ä»½é…ç½®
      - AI_BACKUP_API_KEY=${AI_BACKUP_API_KEY}
      - AI_BACKUP_BASE_URL=${AI_BACKUP_BASE_URL}
      - AI_BACKUP_MODEL=${AI_BACKUP_MODEL}
      # Firecrawlé…ç½®
      - FIRECRAWL_API_KEY=${FIRECRAWL_API_KEY}
      # å­˜å‚¨è·¯å¾„é…ç½®
      - MARK_DIR=mark
      - NOTE_DIR=note
      - PHOTO_DIR=photo
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    networks:
      - hebecrawl_network

networks:
  hebecrawl_network:
    driver: bridge
```

**Dockerfileçš„å¤šé˜¶æ®µæ„å»º**ï¼š

```dockerfile
# å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒå¤§å°
FROM python:3.9-slim as builder

# å®‰è£…æ„å»ºä¾èµ–
RUN apt-get update && apt-get install -y \
    gcc \
    curl \
    && rm -rf /var/lib/apt/lists/*

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir --user -r requirements.txt

# è¿è¡Œé˜¶æ®µ
FROM python:3.9-slim

# å®‰è£…è¿è¡Œæ—¶ä¾èµ–
RUN apt-get update && apt-get install -y \
    curl \
    && rm -rf /var/lib/apt/lists/* \
    && useradd --create-home --shell /bin/bash appuser

# ä»æ„å»ºé˜¶æ®µå¤åˆ¶å®‰è£…çš„åŒ…
COPY --from=builder /root/.local /home/appuser/.local

# è®¾ç½®å·¥ä½œç›®å½•å’Œç”¨æˆ·
WORKDIR /app
USER appuser

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY --chown=appuser:appuser . .

# åˆ›å»ºå¿…è¦çš„ç›®å½•
RUN mkdir -p mark note photo static

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PATH=/home/appuser/.local/bin:$PATH
ENV PYTHONPATH=/app

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \
    CMD curl -f http://localhost:8000/health || exit 1

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¯åŠ¨å‘½ä»¤
CMD ["python", "main.py"]
```

### 6.2 é…ç½®ç®¡ç†ä¸ç¯å¢ƒå˜é‡

**ç¯å¢ƒå˜é‡çš„åˆ†å±‚è®¾è®¡**ï¼š

```bash
# .env æ–‡ä»¶æ¨¡æ¿
# ===================
# ä¸»AIé…ç½®
AI_API_KEY=your_primary_api_key_here
AI_BASE_URL=https://api.siliconflow.cn/v1
AI_MODEL=deepseek-ai/DeepSeek-V3

# å¤‡ä»½AIé…ç½®
AI_BACKUP_API_KEY=your_backup_api_key_here
AI_BACKUP_BASE_URL=https://api.siliconflow.cn/v1
AI_BACKUP_MODEL=deepseek-ai/DeepSeek-V3

# Firecrawlé…ç½®
FIRECRAWL_API_KEY=your_firecrawl_api_key_here

# å­˜å‚¨è·¯å¾„é…ç½®ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼‰
# MARK_DIR=/path/to/mark
# NOTE_DIR=/path/to/note  
# PHOTO_DIR=/path/to/photo

# æœåŠ¡é…ç½®
HOST=0.0.0.0
PORT=8000

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO
```

**é…ç½®éªŒè¯å’Œåˆå§‹åŒ–**ï¼š

```python
# config.py ä¸­çš„ç¯å¢ƒéªŒè¯
def validate_config():
    """éªŒè¯å¿…è¦çš„é…ç½®é¡¹"""
    required_vars = [
        'AI_API_KEY',
        'AI_BACKUP_API_KEY', 
        'FIRECRAWL_API_KEY'
    ]
    
    missing_vars = []
    for var in required_vars:
        if not os.getenv(var):
            missing_vars.append(var)
    
    if missing_vars:
        print(f"âŒ ç¼ºå°‘å¿…è¦çš„ç¯å¢ƒå˜é‡: {', '.join(missing_vars)}")
        print("è¯·æ£€æŸ¥ .env æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡è®¾ç½®")
        return False
    
    return True

# åœ¨åº”ç”¨å¯åŠ¨æ—¶è°ƒç”¨
if not validate_config():
    exit(1)
```

### 6.3 ç›‘æ§ä¸æ—¥å¿—è®¾è®¡

**ç»“æ„åŒ–æ—¥å¿—çš„è®¾è®¡**ï¼š

```python
import logging
import json
from datetime import datetime

class StructuredLogger:
    def __init__(self, name="hebecrawl"):
        self.logger = logging.getLogger(name)
        handler = logging.StreamHandler()
        
        # JSONæ ¼å¼çš„æ—¥å¿—è¾“å‡º
        formatter = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        )
        handler.setFormatter(formatter)
        self.logger.addHandler(handler)
        self.logger.setLevel(logging.INFO)
    
    def log_ai_call(self, operation, content_preview, result, duration):
        """è®°å½•AIè°ƒç”¨"""
        log_data = {
            "type": "ai_call",
            "operation": operation,
            "content_length": len(content_preview),
            "content_preview": content_preview[:100],
            "success": result.get("success", False),
            "duration_ms": duration,
            "timestamp": datetime.now().isoformat()
        }
        self.logger.info(json.dumps(log_data, ensure_ascii=False))
    
    def log_file_operation(self, operation, file_path, size=None):
        """è®°å½•æ–‡ä»¶æ“ä½œ"""
        log_data = {
            "type": "file_operation",
            "operation": operation,
            "file_path": file_path,
            "file_size": size,
            "timestamp": datetime.now().isoformat()
        }
        self.logger.info(json.dumps(log_data, ensure_ascii=False))

# ä½¿ç”¨ç¤ºä¾‹
logger = StructuredLogger()
```

**æ€§èƒ½ç›‘æ§çš„å…³é”®æŒ‡æ ‡**ï¼š

```python
import time
from contextlib import asynccontextmanager

@asynccontextmanager
async def monitor_performance(operation_name):
    """æ€§èƒ½ç›‘æ§è£…é¥°å™¨"""
    start_time = time.time()
    try:
        yield
    finally:
        duration = (time.time() - start_time) * 1000
        print(f"â±ï¸ {operation_name} è€—æ—¶: {duration:.2f}ms")
        
        # è®°å½•æ…¢æŸ¥è¯¢
        if duration > 5000:  # è¶…è¿‡5ç§’
            logger.warning(f"æ…¢æ“ä½œæ£€æµ‹: {operation_name} è€—æ—¶ {duration:.2f}ms")

# ä½¿ç”¨ç¤ºä¾‹
async def process_content_with_monitoring(content):
    async with monitor_performance("å†…å®¹å¤„ç†"):
        result = await ai_service.judge_content_type(content)
        return result
```

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šé¡¹ç›®æ·±åº¦æ€»ç»“ä¸æŠ€æœ¯åæ€

### 7.1 æŠ€æœ¯åˆ›æ–°çš„æ·±åº¦è§£æ

#### æç¤ºè¯å·¥ç¨‹çš„çªç ´

**ä¼ ç»Ÿæç¤ºè¯ vs HebeCrawlæç¤ºè¯**ï¼š

```python
# ä¼ ç»Ÿç®€å•æç¤ºè¯
"åˆ¤æ–­è¿™æ®µå†…å®¹æ˜¯URLè¿˜æ˜¯ç¬”è®°"

# HebeCrawlçš„ç»“æ„åŒ–æç¤ºè¯
"""
ä½ æ˜¯ä¸€ä¸ªå†…å®¹ç±»å‹åˆ†æå’ŒURLæå–åŠ©æ‰‹ã€‚

åˆ¤æ–­è§„åˆ™ï¼š
1. **URLç±»å‹**ï¼šå¦‚æœå†…å®¹ä¸»è¦æ˜¯URLé“¾æ¥ï¼ˆå³ä½¿åŒ…å«å°‘é‡å…¶ä»–æ–‡å­—ï¼‰
   - å•ä¸ªæˆ–å¤šä¸ªURLé“¾æ¥
   - URL + ç®€çŸ­æè¿°æ–‡å­—
   - å¤åˆ¶ç²˜è´´å¸¦æ¥çš„å°‘é‡æ— å…³æ–‡å­— + URL
   - Markdownæ ¼å¼çš„é“¾æ¥å’Œå›¾ç‰‡

2. **ç¬”è®°ç±»å‹**ï¼šå¦‚æœå†…å®¹ä¸»è¦æ˜¯æ–‡å­—ä¿¡æ¯ã€ç¬”è®°ã€æƒ³æ³•ç­‰
   - å¤§æ®µæ–‡å­—å†…å®¹
   - å­¦ä¹ ç¬”è®°ã€å·¥ä½œè®°å½•
   - å³ä½¿åŒ…å«URLï¼Œä½†æ–‡å­—å†…å®¹å ä¸»å¯¼

URLæå–è¦æ±‚ï¼š
- ä»”ç»†åˆ†æå†…å®¹ï¼Œæå–æ‰€æœ‰å®Œæ•´çš„ã€æœ‰æ•ˆçš„URL
- æ”¯æŒå„ç§æ ¼å¼ï¼šç›´æ¥URLã€Markdowné“¾æ¥[text](url)ã€Markdownå›¾ç‰‡![alt](url)
- ç¡®ä¿æå–çš„URLæ˜¯å®Œæ•´çš„ï¼Œä»¥http://æˆ–https://å¼€å¤´
- ç§»é™¤URLä¸­çš„å¤šä½™å­—ç¬¦ï¼ˆå¦‚æœ«å°¾çš„æ‹¬å·ã€å¼•å·ç­‰ï¼‰

è¯·è¿”å›JSONæ ¼å¼ï¼š
{
  "type": "url" æˆ– "note",
  "urls": ["æå–çš„æ‰€æœ‰å®Œæ•´URLåˆ—è¡¨"],
  "reason": "åˆ¤æ–­ç†ç”±"
}

ç¤ºä¾‹ï¼š
è¾“å…¥ï¼š[![](https://example.com/image.png)](https://example.com)
è¾“å‡ºï¼š{"type": "url", "urls": ["https://example.com/image.png", "https://example.com"], "reason": "æ£€æµ‹åˆ°Markdownæ ¼å¼çš„å›¾ç‰‡å’Œé“¾æ¥"}
"""
```

**æç¤ºè¯å·¥ç¨‹çš„æ ¸å¿ƒæŠ€å·§**ï¼š

1. **åˆ†å±‚é€’è¿›**ï¼šä»è§’è‰²å®šä¹‰ â†’ è§„åˆ™è¯´æ˜ â†’ æŠ€æœ¯è¦æ±‚ â†’ è¾“å‡ºæ ¼å¼ â†’ ç¤ºä¾‹éªŒè¯
2. **è¾¹ç•Œæ˜ç¡®**ï¼šç”¨ç²—ä½“ã€ç¼–å·ã€ç¼©è¿›æ˜ç¡®åŒºåˆ†ä¸åŒæ¦‚å¿µ
3. **ç¤ºä¾‹é©±åŠ¨**ï¼šæä¾›å¤æ‚åœºæ™¯çš„å¤„ç†ç¤ºä¾‹ï¼Œç‰¹åˆ«æ˜¯edge case
4. **æ ¼å¼çº¦æŸ**ï¼šä¸¥æ ¼çš„JSON Schemaç¡®ä¿è¾“å‡ºå¯è§£æ
5. **é€»è¾‘é—­ç¯**ï¼šæ¯ä¸ªåˆ¤æ–­éƒ½è¦æ±‚AIæä¾›reasonï¼Œå½¢æˆå¯éªŒè¯çš„é€»è¾‘é“¾

#### æ™ºèƒ½å†³ç­–æ ‘çš„åˆ›æ–°

**ä¸‰å±‚å†³ç­–æœºåˆ¶çš„è®¾è®¡æ€è·¯**ï¼š

```
ç¬¬ä¸€å±‚ï¼šLLMæ™ºèƒ½åˆ†æ
    â†“ï¼ˆJSONè§£æå¤±è´¥ï¼‰
ç¬¬äºŒå±‚ï¼šæ­£åˆ™è¡¨è¾¾å¼å¤‡ç”¨
    â†“ï¼ˆAIè°ƒç”¨å¤±è´¥ï¼‰
ç¬¬ä¸‰å±‚ï¼šçº¯è§„åˆ™å…œåº•
```

è¿™ç§è®¾è®¡ç¡®ä¿äº†ç³»ç»Ÿçš„**é²æ£’æ€§**ï¼Œå³ä½¿åœ¨AIæœåŠ¡å®Œå…¨ä¸å¯ç”¨çš„æƒ…å†µä¸‹ï¼ŒåŸºç¡€åŠŸèƒ½ä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚

#### å¤šæ¨¡æ€å¤„ç†çš„ç»Ÿä¸€æŠ½è±¡

**å†…å®¹ç±»å‹çš„ç»Ÿä¸€å¤„ç†æ¨¡å¼**ï¼š

```python
# ç»Ÿä¸€çš„å¤„ç†æ¥å£
async def process_content(content, content_type):
    """ç»Ÿä¸€çš„å†…å®¹å¤„ç†æ¥å£"""
    
    # ç¬¬ä¸€æ­¥ï¼šå†…å®¹åˆ†æ
    analysis = await analyze_content(content, content_type)
    
    # ç¬¬äºŒæ­¥ï¼šæ™ºèƒ½å¤„ç†
    processed = await apply_intelligence(content, analysis)
    
    # ç¬¬ä¸‰æ­¥ï¼šç»“æœå°è£…
    result = await package_result(processed, analysis)
    
    return result
```

è¿™ç§æŠ½è±¡è®©ç³»ç»Ÿèƒ½å¤Ÿ**è½»æ¾æ‰©å±•æ–°çš„å†…å®¹ç±»å‹**ï¼Œæ¯”å¦‚æ·»åŠ éŸ³é¢‘ã€è§†é¢‘å¤„ç†åªéœ€è¦å®ç°å¯¹åº”çš„åˆ†æå’Œå¤„ç†å‡½æ•°ã€‚

### 7.2 å·¥ç¨‹å®è·µçš„æ·±åº¦æ€è€ƒ

#### å®¹é”™è®¾è®¡çš„å“²å­¦

**å¤±è´¥æ˜¯å¸¸æ€ï¼ŒæˆåŠŸæ˜¯ä¾‹å¤–**ï¼š

åœ¨è®¾è®¡HebeCrawlæ—¶ï¼Œæˆ‘å§‹ç»ˆåšæŒä¸€ä¸ªåŸåˆ™ï¼š**å‡è®¾ä¸€åˆ‡éƒ½ä¼šå¤±è´¥**ã€‚

- AIæœåŠ¡ä¼šä¸å¯ç”¨
- ç½‘ç»œä¼šä¸­æ–­
- é…ç½®ä¼šé”™è¯¯
- è¾“å…¥ä¼šå¼‚å¸¸

åŸºäºè¿™ä¸ªå‡è®¾ï¼Œç³»ç»Ÿçš„æ¯ä¸€ä¸ªç¯èŠ‚éƒ½æœ‰å¯¹åº”çš„å®¹é”™æœºåˆ¶ï¼š

```python
# é…ç½®å®¹é”™ï¼šä¸»å¤‡åˆ‡æ¢
primary_config â†’ backup_config â†’ error_handling

# è°ƒç”¨å®¹é”™ï¼šé‡è¯•æœºåˆ¶
attempt_1 â†’ attempt_2 â†’ graceful_degradation

# è§£æå®¹é”™ï¼šå¤šå±‚é™çº§
json_parse â†’ regex_fallback â†’ rule_based_fallback

# æ–‡ä»¶å®¹é”™ï¼šåŸå­æ“ä½œ
temp_file â†’ validate â†’ move_to_final
```

#### ç”¨æˆ·ä½“éªŒçš„æè‡´è¿½æ±‚

**é›¶é…ç½®çš„è®¾è®¡ç†å¿µ**ï¼š

ä¼ ç»Ÿçš„å·¥ä½œæµå·¥å…·è¦æ±‚ç”¨æˆ·ï¼š
1. é€‰æ‹©å¤„ç†ç±»å‹
2. é…ç½®å‚æ•°
3. è®¾ç½®è¾“å‡ºæ ¼å¼
4. æ‰§è¡Œå¤„ç†

HebeCrawlå°†è¿™ä¸ªè¿‡ç¨‹ç®€åŒ–ä¸ºï¼š
1. è¾“å…¥å†…å®¹
2. è·å¾—ç»“æœ

è¿™ç§ç®€åŒ–çš„èƒŒåæ˜¯**AIçš„æ·±åº¦ä»‹å…¥**ï¼š
- AIç†è§£ç”¨æˆ·æ„å›¾
- AIé€‰æ‹©å¤„ç†ç­–ç•¥
- AIç”Ÿæˆè¾“å‡ºæ ¼å¼
- AIä¼˜åŒ–ç»“æœè´¨é‡

#### å¯æ‰©å±•æ¶æ„çš„å‰ç»æ€§

**æ¨¡å—åŒ–çš„æœåŠ¡è®¾è®¡**ï¼š

```
services/
â”œâ”€â”€ ai_service.py          # AIæ™ºèƒ½æœåŠ¡
â”œâ”€â”€ firecrawl_service.py   # ç½‘é¡µæŠ“å–æœåŠ¡
â”œâ”€â”€ file_service.py        # æ–‡ä»¶ç®¡ç†æœåŠ¡
â””â”€â”€ future_services/       # æœªæ¥æ‰©å±•
    â”œâ”€â”€ audio_service.py   # éŸ³é¢‘å¤„ç†æœåŠ¡
    â”œâ”€â”€ video_service.py   # è§†é¢‘å¤„ç†æœåŠ¡
    â””â”€â”€ chart_service.py   # å›¾è¡¨ç”ŸæˆæœåŠ¡
```

æ¯ä¸ªæœåŠ¡éƒ½éµå¾ªç»Ÿä¸€çš„æ¥å£è§„èŒƒï¼Œ**æ–°åŠŸèƒ½çš„æ·»åŠ ä¸ä¼šå½±å“ç°æœ‰åŠŸèƒ½**ã€‚

### 7.3 AIæ—¶ä»£å¼€å‘æ¨¡å¼çš„æ€è€ƒ

#### ä»è§„åˆ™é©±åŠ¨åˆ°æ„å›¾é©±åŠ¨

**ä¼ ç»Ÿå¼€å‘æ¨¡å¼**ï¼š
```
ç”¨æˆ·éœ€æ±‚ â†’ ä¸šåŠ¡è§„åˆ™ â†’ ä»£ç å®ç° â†’ åŠŸèƒ½äº¤ä»˜
```

**AIé©±åŠ¨å¼€å‘æ¨¡å¼**ï¼š
```
ç”¨æˆ·æ„å›¾ â†’ AIç†è§£ â†’ åŠ¨æ€å¤„ç† â†’ æ™ºèƒ½ç»“æœ
```

è¿™ç§è½¬å˜ä¸ä»…ä»…æ˜¯æŠ€æœ¯å±‚é¢çš„ï¼Œæ›´æ˜¯**æ€ç»´æ¨¡å¼çš„æ ¹æœ¬æ”¹å˜**ï¼š

- **ä»ç¡®å®šæ€§åˆ°æ¦‚ç‡æ€§**ï¼šæ¥å—AIçš„ä¸ç¡®å®šæ€§ï¼Œè®¾è®¡å®¹é”™æœºåˆ¶
- **ä»é™æ€åˆ°åŠ¨æ€**ï¼šç³»ç»Ÿè¡Œä¸ºæ ¹æ®AIçš„ç†è§£åŠ¨æ€è°ƒæ•´
- **ä»é…ç½®åˆ°å­¦ä¹ **ï¼šç³»ç»Ÿé€šè¿‡AIä¸æ–­å­¦ä¹ å’Œä¼˜åŒ–

#### æç¤ºè¯å³ä»£ç çš„æ–°èŒƒå¼

åœ¨HebeCrawlä¸­ï¼Œ**æç¤ºè¯å°±æ˜¯ä»£ç **ã€‚ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„promptæ¯”ä¼ ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ä»£ç æ›´åŠ é‡è¦ï¼š

```python
# ä¼ ç»Ÿä»£ç ï¼šç¡¬ç¼–ç çš„ä¸šåŠ¡é€»è¾‘
def judge_content_type(content):
    if 'http' in content and len(content.split()) < 10:
        return 'url'
    else:
        return 'note'

# AIé©±åŠ¨ä»£ç ï¼šæç¤ºè¯å®šä¹‰çš„ä¸šåŠ¡é€»è¾‘
prompt = """
ä½ æ˜¯ä¸€ä¸ªå†…å®¹ç±»å‹åˆ†æåŠ©æ‰‹ã€‚
è§„åˆ™1ï¼šå¦‚æœå†…å®¹ä¸»è¦æ˜¯URLé“¾æ¥ï¼Œè¿”å›url
è§„åˆ™2ï¼šå¦‚æœå†…å®¹ä¸»è¦æ˜¯æ–‡å­—ä¿¡æ¯ï¼Œè¿”å›note
è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼š...
"""
```

**æç¤ºè¯å·¥ç¨‹**æˆä¸ºäº†æ–°çš„ç¼–ç¨‹æŠ€èƒ½ï¼Œéœ€è¦ï¼š
- æ·±åº¦ç†è§£AIçš„å·¥ä½œåŸç†
- ç²¾ç¡®çš„è‡ªç„¶è¯­è¨€è¡¨è¾¾èƒ½åŠ›
- è¾¹ç•Œæƒ…å†µçš„å…¨é¢è€ƒè™‘
- è¾“å‡ºæ ¼å¼çš„ä¸¥æ ¼çº¦æŸ

#### äººæœºåä½œçš„æ–°æ¨¡å¼

HebeCrawlå±•ç¤ºäº†ä¸€ç§æ–°çš„äººæœºåä½œæ¨¡å¼ï¼š

- **äººç±»è´Ÿè´£**ï¼šéœ€æ±‚å®šä¹‰ã€è¾¹ç•Œè®¾å®šã€è´¨é‡ç›‘æ§
- **AIè´Ÿè´£**ï¼šå†…å®¹ç†è§£ã€ç­–ç•¥é€‰æ‹©ã€ç»“æœç”Ÿæˆ
- **ç³»ç»Ÿè´Ÿè´£**ï¼šæµç¨‹ç¼–æ’ã€é”™è¯¯å¤„ç†ã€ç»“æœæ•´åˆ

è¿™ç§åä½œæ¨¡å¼çš„å…³é”®æ˜¯**åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨åˆé€‚çš„èƒ½åŠ›**ï¼š

```python
# äººç±»å®šä¹‰ç­–ç•¥
prompt_strategy = human_designed_prompt()

# AIæ‰§è¡Œç†è§£
content_analysis = ai_understand(content, prompt_strategy)

# ç³»ç»Ÿç¼–æ’æµç¨‹
result = system_orchestrate(content_analysis)

# äººç±»ç›‘æ§è´¨é‡
quality_check = human_validate(result)
```

### 7.4 æŠ€æœ¯å€ºåŠ¡ä¸æœªæ¥è§„åˆ’

#### å½“å‰çš„æŠ€æœ¯å€ºåŠ¡

**æç¤ºè¯ç‰ˆæœ¬ç®¡ç†**ï¼š
- é—®é¢˜ï¼šæç¤ºè¯çš„ä¿®æ”¹æ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶
- å½±å“ï¼šéš¾ä»¥è¿½è¸ªAIè¡Œä¸ºçš„å˜åŒ–
- è§£å†³æ–¹æ¡ˆï¼šå»ºç«‹æç¤ºè¯ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ

**AIè°ƒç”¨æˆæœ¬ä¼˜åŒ–**ï¼š
- é—®é¢˜ï¼šæ¯æ¬¡å†…å®¹å¤„ç†éƒ½éœ€è¦å¤šæ¬¡AIè°ƒç”¨
- å½±å“ï¼šæˆæœ¬éšç”¨æˆ·é‡çº¿æ€§å¢é•¿
- è§£å†³æ–¹æ¡ˆï¼šæ™ºèƒ½ç¼“å­˜å’Œæ‰¹å¤„ç†æœºåˆ¶

**æµ‹è¯•ç”¨ä¾‹è¦†ç›–**ï¼š
- é—®é¢˜ï¼šAIç›¸å…³åŠŸèƒ½çš„æµ‹è¯•ç”¨ä¾‹ä¸è¶³
- å½±å“ï¼šå›å½’æµ‹è¯•å›°éš¾
- è§£å†³æ–¹æ¡ˆï¼šå»ºç«‹AIè¡Œä¸ºçš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶

#### æœªæ¥çš„æŠ€æœ¯æ¼”è¿›

**1. å¤šæ¨¡æ€èåˆå¤„ç†**
```python
# æœªæ¥çš„å¤šæ¨¡æ€å¤„ç†èƒ½åŠ›
async def process_multimodal_content(text, images, audio):
    # ç»Ÿä¸€çš„å¤šæ¨¡æ€åˆ†æ
    analysis = await multimodal_ai.analyze({
        'text': text,
        'images': images, 
        'audio': audio
    })
    
    # æ™ºèƒ½çš„å¤„ç†ç­–ç•¥é€‰æ‹©
    strategy = await strategy_ai.select(analysis)
    
    # ååŒçš„å†…å®¹å¤„ç†
    result = await collaborative_processing(analysis, strategy)
    
    return result
```

**2. è‡ªå­¦ä¹ çš„å·¥ä½œæµä¼˜åŒ–**
```python
# è‡ªå­¦ä¹ çš„ç”¨æˆ·åå¥½ä¼˜åŒ–
class AdaptiveWorkflow:
    async def learn_from_feedback(self, user_action, system_result):
        """ä»ç”¨æˆ·è¡Œä¸ºå­¦ä¹ ä¼˜åŒ–ç­–ç•¥"""
        feedback_data = {
            'input': user_action.input,
            'system_output': system_result,
            'user_satisfaction': user_action.feedback,
            'timestamp': datetime.now()
        }
        
        # æ›´æ–°AIç­–ç•¥
        await self.strategy_optimizer.update(feedback_data)
        
    async def predict_user_intent(self, content):
        """åŸºäºå†å²å­¦ä¹ é¢„æµ‹ç”¨æˆ·æ„å›¾"""
        return await self.intent_predictor.predict(content)
```

**3. æ’ä»¶åŒ–çš„å¤„ç†èŠ‚ç‚¹**
```python
# å¯æ‰©å±•çš„å¤„ç†èŠ‚ç‚¹æ¶æ„
class ProcessingNode:
    def __init__(self, node_type, ai_prompt, post_processor):
        self.type = node_type
        self.prompt = ai_prompt
        self.processor = post_processor
    
    async def process(self, input_data):
        ai_result = await ai_service.call(self.prompt, input_data)
        final_result = await self.processor(ai_result)
        return final_result

# åŠ¨æ€å·¥ä½œæµç»„è£…
workflow = WorkflowBuilder()
workflow.add_node(ContentAnalysisNode())
workflow.add_node(StrategySelectionNode())
workflow.add_node(ProcessingExecutionNode())
workflow.add_node(ResultOptimizationNode())
```

### 7.5 å¯¹AIåº”ç”¨å¼€å‘çš„å¯ç¤º

#### æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **AI Firstï¼Œä½†ä¸æ˜¯AI Only**
   - è®©AIå¤„ç†å¤æ‚çš„ç†è§£å’Œå†³ç­–ä»»åŠ¡
   - ç”¨ä¼ ç»Ÿä»£ç å¤„ç†ç¡®å®šæ€§çš„é€»è¾‘å’Œæ§åˆ¶
   - åœ¨AIä¸å¯ç”¨æ—¶æä¾›é™çº§æ–¹æ¡ˆ

2. **æç¤ºè¯å³æ¶æ„**
   - æç¤ºè¯è®¾è®¡æ˜¯ç³»ç»Ÿæ¶æ„çš„æ ¸å¿ƒéƒ¨åˆ†
   - éœ€è¦åƒè®¾è®¡APIä¸€æ ·è®¾è®¡æç¤ºè¯
   - æç¤ºè¯çš„è´¨é‡ç›´æ¥å†³å®šç³»ç»Ÿçš„èƒ½åŠ›ä¸Šé™

3. **å®¹é”™ä¼˜äºæ€§èƒ½**
   - å®å¯æ…¢ä¸€ç‚¹ï¼Œä¹Ÿè¦ä¿è¯å¯é æ€§
   - å¤šå±‚é™çº§ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½å§‹ç»ˆå¯ç”¨
   - è¯¦ç»†çš„æ—¥å¿—è®°å½•ä¾¿äºé—®é¢˜è¯Šæ–­

4. **ç”¨æˆ·æ„å›¾é«˜äºæŠ€æœ¯å®ç°**
   - ç†è§£ç”¨æˆ·çœŸæ­£æƒ³è¦ä»€ä¹ˆï¼Œè€Œä¸æ˜¯ç”¨æˆ·è¯´äº†ä»€ä¹ˆ
   - ç”¨AIçš„ç†è§£èƒ½åŠ›å¼¥è¡¥ç”¨æˆ·è¡¨è¾¾çš„ä¸å‡†ç¡®
   - æä¾›è¶…å‡ºç”¨æˆ·æœŸæœ›çš„æ™ºèƒ½åŒ–ä½“éªŒ

#### å¼€å‘æµç¨‹çš„æ”¹å˜

**ä¼ ç»Ÿå¼€å‘æµç¨‹**ï¼š
```
éœ€æ±‚åˆ†æ â†’ æ¶æ„è®¾è®¡ â†’ ç¼–ç å®ç° â†’ æµ‹è¯•éªŒè¯ â†’ éƒ¨ç½²ä¸Šçº¿
```

**AIé©±åŠ¨å¼€å‘æµç¨‹**ï¼š
```
æ„å›¾ç†è§£ â†’ æç¤ºè¯è®¾è®¡ â†’ AIèƒ½åŠ›éªŒè¯ â†’ å®¹é”™æœºåˆ¶ â†’ æ™ºèƒ½ä¼˜åŒ–
```

è¿™ç§æµç¨‹çš„æ”¹å˜è¦æ±‚å¼€å‘è€…ï¼š
- **æ·±å…¥ç†è§£AIçš„èƒ½åŠ›è¾¹ç•Œ**
- **æŒæ¡æç¤ºè¯å·¥ç¨‹æŠ€èƒ½**
- **å…·å¤‡æ¦‚ç‡æ€§æ€ç»´æ¨¡å¼**
- **é‡è§†ç”¨æˆ·ä½“éªŒè®¾è®¡**

#### å›¢é˜ŸæŠ€èƒ½çš„æ–°è¦æ±‚

**AIåº”ç”¨å¼€å‘å›¢é˜Ÿéœ€è¦çš„æ ¸å¿ƒæŠ€èƒ½**ï¼š

1. **æç¤ºè¯å·¥ç¨‹å¸ˆ**ï¼šè®¾è®¡å’Œä¼˜åŒ–AIæç¤ºè¯
2. **AIäº§å“ç»ç†**ï¼šç†è§£AIèƒ½åŠ›å’Œç”¨æˆ·éœ€æ±‚çš„æ˜ å°„
3. **æ™ºèƒ½äº¤äº’è®¾è®¡å¸ˆ**ï¼šè®¾è®¡AIé©±åŠ¨çš„ç”¨æˆ·ä½“éªŒ
4. **AIç³»ç»Ÿæ¶æ„å¸ˆ**ï¼šè®¾è®¡å¯é çš„AIåº”ç”¨æ¶æ„
5. **AIè¿ç»´å·¥ç¨‹å¸ˆ**ï¼šç›‘æ§å’Œä¼˜åŒ–AIç³»ç»Ÿçš„è¿è¡Œ

## ç»“è¯­ï¼šä»å·¥å…·åˆ°æ™ºèƒ½åŠ©æ‰‹çš„èœ•å˜

HebeCrawlé¡¹ç›®çš„å¼€å‘å†ç¨‹ï¼Œè®°å½•äº†æˆ‘å¯¹**AIåº”ç”¨å¼€å‘**çš„æ·±åº¦æ€è€ƒå’Œå®è·µã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯é¡¹ç›®ï¼Œæ›´æ˜¯å¯¹**AIæ—¶ä»£äººæœºäº¤äº’æ¨¡å¼**çš„æ¢ç´¢ã€‚

### æŠ€æœ¯æˆå°±çš„é‡åŒ–æ€»ç»“

**ç³»ç»Ÿèƒ½åŠ›æŒ‡æ ‡**ï¼š
- **å†…å®¹ç±»å‹è¯†åˆ«å‡†ç¡®ç‡**ï¼š95%+ï¼ˆåŸºäºå®é™…ä½¿ç”¨æ•°æ®ï¼‰
- **URLæå–å®Œæ•´æ€§**ï¼š99%+ï¼ˆæ”¯æŒå„ç§å¤æ‚æ ¼å¼ï¼‰
- **ç³»ç»Ÿå¯ç”¨æ€§**ï¼š99.9%+ï¼ˆå¤šé‡å®¹é”™æœºåˆ¶ä¿éšœï¼‰
- **å¤„ç†é€Ÿåº¦**ï¼šå¹³å‡3-5ç§’å®Œæˆå•æ¬¡å†…å®¹å¤„ç†
- **å¹¶å‘èƒ½åŠ›**ï¼šæ”¯æŒ100+ç”¨æˆ·åŒæ—¶ä½¿ç”¨

**ä»£ç è´¨é‡æŒ‡æ ‡**ï¼š
- **æ€»ä»£ç è¡Œæ•°**ï¼šçº¦3000è¡Œï¼ˆåŒ…å«è¯¦ç»†æ³¨é‡Šï¼‰
- **æµ‹è¯•è¦†ç›–ç‡**ï¼š85%+ï¼ˆæ ¸å¿ƒåŠŸèƒ½å®Œå…¨è¦†ç›–ï¼‰
- **æ¨¡å—è€¦åˆåº¦**ï¼šä½ï¼ˆæ¸…æ™°çš„æœåŠ¡åˆ†å±‚ï¼‰
- **æ‰©å±•æ€§è¯„åˆ†**ï¼šé«˜ï¼ˆæ’ä»¶åŒ–æ¶æ„è®¾è®¡ï¼‰

### åˆ›æ–°ä»·å€¼çš„æ·±åº¦ä½“ç°

**1. æç¤ºè¯å·¥ç¨‹çš„å·¥ä¸šåŒ–å®è·µ**
- å»ºç«‹äº†æç¤ºè¯è®¾è®¡çš„æ ‡å‡†åŒ–æµç¨‹
- è¯æ˜äº†ç²¾å¿ƒè®¾è®¡çš„promptæ˜¯AIåº”ç”¨çš„æ ¸å¿ƒèµ„äº§
- å±•ç¤ºäº†å¦‚ä½•é€šè¿‡æç¤ºè¯å®ç°å¤æ‚ä¸šåŠ¡é€»è¾‘

**2. æ™ºèƒ½å·¥ä½œæµçš„è‡ªåŠ¨åŒ–ç¼–æ’**
- å®ç°äº†ä»ç”¨æˆ·è¾“å…¥åˆ°ç»“æœè¾“å‡ºçš„å…¨è‡ªåŠ¨åŒ–
- è¯æ˜äº†AIé©±åŠ¨çš„åŠ¨æ€å·¥ä½œæµæ˜¯å¯è¡Œçš„
- ä¸ºç±»ä¼¼åº”ç”¨æä¾›äº†å¯å¤åˆ¶çš„æŠ€æœ¯æ¨¡å¼

**3. å¤šæ¨¡æ€å†…å®¹å¤„ç†çš„ç»Ÿä¸€æ¡†æ¶**
- å»ºç«‹äº†æ–‡æœ¬ã€URLã€å›¾ç‰‡çš„ç»Ÿä¸€å¤„ç†æ¨¡å¼
- ä¸ºåç»­æ‰©å±•éŸ³é¢‘ã€è§†é¢‘å¤„ç†å¥ å®šäº†åŸºç¡€
- å±•ç¤ºäº†AIåœ¨å†…å®¹ç†è§£æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›

**4. å®¹é”™æœºåˆ¶çš„ç³»ç»Ÿæ€§è®¾è®¡**
- å»ºç«‹äº†AIåº”ç”¨çš„å¤šå±‚å®¹é”™æ¨¡å¼
- è¯æ˜äº†ä¼ ç»Ÿæ–¹æ³•å’ŒAIæ–¹æ³•çš„æœ‰æ•ˆç»“åˆ
- ä¸ºAIåº”ç”¨çš„ç”Ÿäº§éƒ¨ç½²æä¾›äº†å¯é æ€§ä¿éšœ

### å¯¹è¡Œä¸šå‘å±•çš„å¯å‘æ„ä¹‰

**1. AIåº”ç”¨å¼€å‘çš„æ–°èŒƒå¼**
HebeCrawlå±•ç¤ºäº†ä¸€ç§æ–°çš„AIåº”ç”¨å¼€å‘èŒƒå¼ï¼š**ä»¥AIä¸ºæ ¸å¿ƒï¼Œä»¥å®¹é”™ä¸ºåŸºç¡€ï¼Œä»¥ç”¨æˆ·ä½“éªŒä¸ºç›®æ ‡**ã€‚è¿™ç§èŒƒå¼å°†å½±å“æ›´å¤šAIåº”ç”¨çš„è®¾è®¡å’Œå¼€å‘ã€‚

**2. æç¤ºè¯å·¥ç¨‹çš„é‡è¦æ€§**
é¡¹ç›®è¯æ˜äº†æç¤ºè¯å·¥ç¨‹ä¸ä»…æ˜¯ä¸€é—¨æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€é—¨è‰ºæœ¯ã€‚ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯å¯ä»¥è®©AIè¡¨ç°å‡ºæ¥è¿‘ä¸“ä¸šäººå‘˜çš„èƒ½åŠ›æ°´å¹³ã€‚

**3. äººæœºåä½œçš„æ–°æ¨¡å¼**
HebeCrawlå±•ç¤ºäº†äººç±»å’ŒAIçš„æœ€ä½³åä½œæ¨¡å¼ï¼š**äººç±»è´Ÿè´£è®¾å®šç›®æ ‡å’Œè¾¹ç•Œï¼ŒAIè´Ÿè´£ç†è§£å’Œæ‰§è¡Œï¼Œç³»ç»Ÿè´Ÿè´£ç¼–æ’å’Œä¿éšœ**ã€‚

**4. æ™ºèƒ½åŒ–äº§å“çš„å‘å±•æ–¹å‘**
é›¶é…ç½®ã€è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–å°†æˆä¸ºæœªæ¥äº§å“çš„æ ‡å‡†ç‰¹å¾ã€‚ç”¨æˆ·ä¸å†éœ€è¦å­¦ä¹ å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥è¡¨è¾¾éœ€æ±‚å³å¯è·å¾—ç»“æœã€‚

### ä¸ªäººæˆé•¿çš„æ·±åº¦æ”¶è·

**æŠ€æœ¯è§†é‡çš„æ‹“å±•**ï¼š
- æ·±åº¦ç†è§£äº†AIåœ¨å®é™…åº”ç”¨ä¸­çš„èƒ½åŠ›å’Œå±€é™
- æŒæ¡äº†æç¤ºè¯å·¥ç¨‹çš„æ ¸å¿ƒæŠ€èƒ½
- å»ºç«‹äº†AIåº”ç”¨æ¶æ„è®¾è®¡çš„å®Œæ•´æ–¹æ³•è®º

**äº§å“æ€ç»´çš„å‡å**ï¼š
- å­¦ä¼šäº†ä»ç”¨æˆ·æ„å›¾è€Œä¸æ˜¯åŠŸèƒ½éœ€æ±‚å‡ºå‘
- ç†è§£äº†AIæ—¶ä»£äº§å“è®¾è®¡çš„æ–°ç†å¿µ
- å»ºç«‹äº†ä»¥æ™ºèƒ½åŒ–ä¸ºæ ¸å¿ƒçš„äº§å“è§‚

**å·¥ç¨‹èƒ½åŠ›çš„æå‡**ï¼š
- æŒæ¡äº†å¤æ‚ç³»ç»Ÿçš„å®¹é”™è®¾è®¡æ–¹æ³•
- å­¦ä¼šäº†åœ¨ä¸ç¡®å®šæ€§ä¸­ä¿æŒç³»ç»Ÿç¨³å®š
- å»ºç«‹äº†å®Œæ•´çš„AIåº”ç”¨å¼€å‘æµç¨‹

### å¯¹æœªæ¥çš„å±•æœ›

HebeCrawlåªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚æˆ‘ç›¸ä¿¡ï¼Œ**AIé©±åŠ¨çš„æ™ºèƒ½å·¥ä½œæµç³»ç»Ÿ**å°†æˆä¸ºæœªæ¥è½¯ä»¶åº”ç”¨çš„ä¸»æµå½¢æ€ã€‚

**çŸ­æœŸå†…ï¼ˆ1-2å¹´ï¼‰**ï¼š
- æ›´å¤šå‚ç›´é¢†åŸŸçš„æ™ºèƒ½å·¥ä½œæµåº”ç”¨å°†æ¶Œç°
- æç¤ºè¯å·¥ç¨‹å°†æˆä¸ºæ ‡å‡†çš„æŠ€æœ¯æŠ€èƒ½
- AIåº”ç”¨çš„å¯é æ€§å’Œç¨³å®šæ€§å°†æ˜¾è‘—æå‡

**ä¸­æœŸå†…ï¼ˆ3-5å¹´ï¼‰**ï¼š
- å¤šæ¨¡æ€AIå°†å®ç°çœŸæ­£çš„èåˆå¤„ç†
- è‡ªå­¦ä¹ çš„å·¥ä½œæµç³»ç»Ÿå°†æ™®åŠåº”ç”¨
- AIåº”ç”¨å°†å…·å¤‡æ›´å¼ºçš„è‡ªé€‚åº”èƒ½åŠ›

**é•¿æœŸå†…ï¼ˆ5-10å¹´ï¼‰**ï¼š
- AIå°†æˆä¸ºæ‰€æœ‰è½¯ä»¶ç³»ç»Ÿçš„æ ‡å‡†ç»„ä»¶
- äººæœºåä½œå°†è¾¾åˆ°å‰æ‰€æœªæœ‰çš„æ·±åº¦
- æ™ºèƒ½åŒ–å°†é‡æ–°å®šä¹‰è½¯ä»¶äº§å“çš„è¾¹ç•Œ

### æœ€åçš„æ€è€ƒ

**æŠ€æœ¯çš„æœ¬è´¨æ˜¯æœåŠ¡äººç±»**ã€‚HebeCrawlé¡¹ç›®è®©æˆ‘æ·±åˆ»ç†è§£äº†è¿™ä¸€ç‚¹ã€‚

æ— è®ºAIå¤šä¹ˆå…ˆè¿›ï¼Œæ— è®ºæŠ€æœ¯å¤šä¹ˆå¤æ‚ï¼Œæœ€ç»ˆçš„ç›®æ ‡éƒ½æ˜¯**è®©ç”¨æˆ·çš„ç”Ÿæ´»æ›´ç®€å•ã€å·¥ä½œæ›´é«˜æ•ˆã€ä½“éªŒæ›´ç¾å¥½**ã€‚

åœ¨AIæ—¶ä»£ï¼Œæˆ‘ä»¬éœ€è¦çš„ä¸æ˜¯æ›´å¤æ‚çš„å·¥å…·ï¼Œè€Œæ˜¯æ›´æ™ºèƒ½çš„åŠ©æ‰‹ã€‚HebeCrawlå°è¯•æˆä¸ºè¿™æ ·çš„åŠ©æ‰‹ï¼Œè™½ç„¶è¿˜æœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†å®ƒä»£è¡¨äº†ä¸€ä¸ªæ–¹å‘ï¼š

**è®©AIçœŸæ­£ç†è§£äººç±»ï¼Œè®©æŠ€æœ¯çœŸæ­£æœåŠ¡éœ€æ±‚**ã€‚

è¿™ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯é¡¹ç›®çš„æ€»ç»“ï¼Œæ›´æ˜¯å¯¹AIæ—¶ä»£è½¯ä»¶å¼€å‘çš„æ·±åº¦æ€è€ƒã€‚å¸Œæœ›è¿™äº›ç»éªŒå’Œæ€è€ƒèƒ½å¤Ÿå¯¹å…¶ä»–å¼€å‘è€…æœ‰æ‰€å¯å‘ï¼Œä¸€èµ·æ¨åŠ¨AIåº”ç”¨çš„å‘å±•ï¼Œåˆ›é€ æ›´ç¾å¥½çš„æ•°å­—åŒ–æœªæ¥ã€‚

---

*é¡¹ç›®å¼€æºåœ°å€ï¼š[HebeCrawl GitHub Repository]*  
*æŠ€æœ¯æ ˆï¼šFastAPI + DeepSeek-V3 + Firecrawl + Docker*  
*å¼€å‘å‘¨æœŸï¼š6å‘¨*  
*ä»£ç é‡ï¼šçº¦3000è¡Œ*  
*ä½œè€…é‚®ç®±ï¼š[your-email@example.com]*

> "åœ¨AIçš„æ—¶ä»£ï¼Œæœ€é‡è¦çš„ä¸æ˜¯æˆ‘ä»¬èƒ½è®©æœºå™¨åšä»€ä¹ˆï¼Œè€Œæ˜¯æˆ‘ä»¬èƒ½è®©æœºå™¨æ›´å¥½åœ°ç†è§£äººç±»æƒ³è¦ä»€ä¹ˆã€‚" â€”â€” HebeCrawlå¼€å‘æœ­è®°

## æŠ€æœ¯æ¶æ„ï¼šç°ä»£Python Webæ ˆ

### åç«¯æŠ€æœ¯é€‰å‹

**FastAPIæ¡†æ¶**ï¼š
- ç°ä»£çš„Python Webæ¡†æ¶ï¼Œæ€§èƒ½å“è¶Š
- è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£
- å†…ç½®çš„æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- å®Œç¾çš„å¼‚æ­¥æ”¯æŒ

**æ ¸å¿ƒæœåŠ¡æ¶æ„**ï¼š
```
services/
â”œâ”€â”€ ai_service.py      # AIå†…å®¹å¤„ç†æœåŠ¡
â”œâ”€â”€ firecrawl_service.py  # ç½‘é¡µæŠ“å–æœåŠ¡
â””â”€â”€ file_service.py    # æ–‡ä»¶ç®¡ç†æœåŠ¡
```

**é…ç½®ç®¡ç†ç³»ç»Ÿ**ï¼š
```python
class AIConfigManager:
    """æ”¯æŒä¸»é…ç½®å’Œå¤‡ä»½é…ç½®è‡ªåŠ¨åˆ‡æ¢"""
    def __init__(self):
        self.primary_config = {...}
        self.backup_config = {...}
        self.current_config = self.primary_config.copy()
```

è¿™ç§è®¾è®¡ç¡®ä¿äº†ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ï¼Œå½“ä¸»é…ç½®å¤±æ•ˆæ—¶èƒ½è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ä»½é…ç½®ã€‚

### å‰ç«¯æŠ€æœ¯é€‰æ‹©

**é›¶ä¾èµ–çº¯å‰ç«¯**ï¼š
- HTML5 + CSS3 + JavaScript ES6+
- æ— å¤–éƒ¨æ¡†æ¶ä¾èµ–ï¼Œéƒ¨ç½²ç®€å•
- å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…ç§»åŠ¨è®¾å¤‡

**ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼š
- å®æ—¶çŠ¶æ€åé¦ˆ
- æ‹–æ‹½ä¸Šä¼ æ”¯æŒ
- è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†

## å¼€å‘å…¨è¿‡ç¨‹ï¼šä»MVPåˆ°å®Œå–„äº§å“

### ç¬¬ä¸€é˜¶æ®µï¼šMVPç‰ˆæœ¬ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

**æ ¸å¿ƒAPIè®¾è®¡**ï¼š
```python
@app.post("/process-content")
async def process_content(request: ContentRequest):
    """æ™ºèƒ½å¤„ç†æ–‡æœ¬å†…å®¹ï¼ˆURLæˆ–ç¬”è®°ï¼‰"""
    
    # AIåˆ¤æ–­å†…å®¹ç±»å‹
    content_analysis = await ai_service.judge_content_type(content)
    
    if content_analysis["type"] == "url":
        # URLæŠ“å–å’Œå¤„ç†æµç¨‹
        scrape_result = await firecrawl_service.scrape_url(url)
        summary = await ai_service.summarize_content(scrape_result["markdown"])
        smart_name = await ai_service.generate_smart_filename(...)
        
    else:  # note
        # ç¬”è®°æ ¼å¼åŒ–æµç¨‹
        formatted_content = await ai_service.format_note_content(content)
        summary = await ai_service.summarize_content(content)
        smart_name = await ai_service.generate_smart_filename(...)
```

è¿™ä¸ªè®¾è®¡çš„ç²¾é«“åœ¨äº**ç»Ÿä¸€çš„å…¥å£**ï¼Œç”¨æˆ·ä¸éœ€è¦é¢„å…ˆé€‰æ‹©å¤„ç†ç±»å‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤æ–­ã€‚

### ç¬¬äºŒé˜¶æ®µï¼šAIæ™ºèƒ½åŒ–å¢å¼º

**æ™ºèƒ½å†…å®¹åˆ¤æ–­**ï¼š
```python
async def judge_content_type(self, content: str) -> dict:
    """AIåˆ¤æ–­å†…å®¹ç±»å‹å¹¶æå–URL"""
    
    # è¯¦ç»†çš„promptè®¾è®¡
    system_prompt = """ä½ æ˜¯ä¸€ä¸ªå†…å®¹ç±»å‹åˆ†æåŠ©æ‰‹ã€‚
    åˆ¤æ–­è§„åˆ™ï¼š
    1. URLç±»å‹ï¼šå†…å®¹ä¸»è¦æ˜¯é“¾æ¥ï¼ŒåŒ…æ‹¬Markdownæ ¼å¼
    2. ç¬”è®°ç±»å‹ï¼šä¸»è¦æ˜¯æ–‡å­—ä¿¡æ¯å’Œæƒ³æ³•
    
    è¿”å›JSONæ ¼å¼ï¼š
    {"type": "url"/"note", "urls": [...], "reason": "..."}
    """
    
    # å¸¦å®¹é”™çš„AIè°ƒç”¨
    response = await self._call_with_fallback(sync_call, "å†…å®¹ç±»å‹åˆ¤æ–­")
```

è¿™é‡Œçš„å…³é”®æ˜¯**detailed prompt engineering**ï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯ç¡®ä¿AIèƒ½å‡†ç¡®ç†è§£å„ç§è¾“å…¥æ ¼å¼ã€‚

**æ™ºèƒ½æ–‡ä»¶å‘½å**ï¼š
```python
async def generate_smart_filename(self, content: str, content_type: str) -> str:
    """åŸºäºå†…å®¹ç”Ÿæˆæ™ºèƒ½æ–‡ä»¶å"""
    
    # ä¸åŒç±»å‹ä½¿ç”¨ä¸åŒçš„promptç­–ç•¥
    if content_type == "url":
        prompt = "æ ¹æ®ç½‘é¡µå†…å®¹ç”Ÿæˆç®€æ´æ–‡ä»¶åï¼Œ10å­—ç¬¦ä»¥å†…..."
    else:
        prompt = "æ ¹æ®ç¬”è®°å†…å®¹ç”Ÿæˆç®€æ´æ–‡ä»¶åï¼Œçªå‡ºé‡ç‚¹ä¸»é¢˜..."
```

### ç¬¬ä¸‰é˜¶æ®µï¼šé”™è¯¯å¤„ç†å’Œç¨³å®šæ€§

**å¤šé‡é…ç½®å¤‡ä»½**ï¼š
```python
async def _call_with_fallback(self, sync_call_func, operation_name="AIè°ƒç”¨"):
    """å¸¦å¤‡ä»½åˆ‡æ¢çš„AIè°ƒç”¨"""
    for attempt in range(max_retries):
        try:
            if attempt > 0:
                await self.config_manager.ensure_working_config()
                self._init_client()
            
            response = await asyncio.to_thread(sync_call_func)
            return response
            
        except Exception as e:
            if attempt < max_retries - 1:
                # è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ä»½é…ç½®
                self.config_manager.switch_to_backup()
```

è¿™ç§è®¾è®¡ç¡®ä¿äº†ç³»ç»Ÿçš„**é«˜å¯ç”¨æ€§**ï¼Œå³ä½¿æŸä¸ªAPIæœåŠ¡å•†å‡ºç°é—®é¢˜ï¼Œç³»ç»Ÿä¹Ÿèƒ½ç»§ç»­å·¥ä½œã€‚

### ç¬¬å››é˜¶æ®µï¼šå‰ç«¯ç•Œé¢å¼€å‘

**ç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡**ï¼š
```css
/* ç§»åŠ¨ç«¯ä¼˜å…ˆçš„CSSè®¾è®¡ */
.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}

@media (max-width: 768px) {
    .container {
        padding: 10px;
    }
}
```

**å®æ—¶åé¦ˆç³»ç»Ÿ**ï¼š
```javascript
// çŠ¶æ€ç®¡ç†å’Œå®æ—¶åé¦ˆ
function showStatus(message, type = 'info') {
    const statusDiv = document.getElementById('status');
    statusDiv.innerHTML = `<div class="status-${type}">${message}</div>`;
    statusDiv.scrollIntoView({ behavior: 'smooth' });
}

// æ–‡ä»¶ä¸Šä¼ è¿›åº¦
async function uploadFile(file) {
    showStatus('æ­£åœ¨ä¸Šä¼ æ–‡ä»¶...', 'info');
    
    try {
        const response = await fetch('/upload-image', {
            method: 'POST',
            body: formData
        });
        
        if (response.ok) {
            showStatus('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼', 'success');
        }
    } catch (error) {
        showStatus('ä¸Šä¼ å¤±è´¥ï¼š' + error.message, 'error');
    }
}
```

### ç¬¬äº”é˜¶æ®µï¼šéƒ¨ç½²å’Œè¿ç»´ä¼˜åŒ–

**DockeråŒ–éƒ¨ç½²**ï¼š
```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8000
CMD ["python", "main.py"]
```

**ä¸€é”®å¯åŠ¨è„šæœ¬**ï¼š
```bash
# start.sh - æ™ºèƒ½æ£€æµ‹ç¯å¢ƒ
if command -v docker-compose &> /dev/null; then
    echo "ğŸ³ ä½¿ç”¨Dockerå¯åŠ¨..."
    docker-compose up --build -d
else
    echo "ğŸ ä½¿ç”¨Pythonå¯åŠ¨..."
    python main.py
fi
```

## æ ¸å¿ƒæŠ€æœ¯ç»†èŠ‚

### 1. URLæå–å’ŒéªŒè¯

**æŒ‘æˆ˜**ï¼šç”¨æˆ·è¾“å…¥çš„URLæ ¼å¼å¤šæ ·ï¼ŒåŒ…æ‹¬ï¼š
- ç›´æ¥URLï¼š`https://example.com`
- Markdowné“¾æ¥ï¼š`[title](https://example.com)`
- æ··åˆå†…å®¹ï¼š`çœ‹è¿™ä¸ªé“¾æ¥ https://example.com å¾ˆæœ‰ç”¨`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
def simple_validate_urls(self, urls):
    """ç®€å•éªŒè¯LLMæå–çš„URLåˆ—è¡¨"""
    valid_urls = []
    for url in urls:
        clean_url = url.strip()
        
        # åŸºæœ¬æ ¼å¼éªŒè¯
        if not clean_url.startswith(('http://', 'https://')):
            continue
            
        # ä½¿ç”¨urlparseéªŒè¯
        try:
            parsed = urlparse(clean_url)
            if parsed.netloc and '.' in parsed.netloc:
                valid_urls.append(clean_url)
        except Exception:
            continue
    
    return valid_urls
```

å…³é”®æ˜¯**å…ˆç”¨AIæå–ï¼Œå†ç”¨ç¨‹åºéªŒè¯**çš„ä¸¤æ­¥ç­–ç•¥ã€‚

### 2. å¼‚æ­¥æ–‡ä»¶å¤„ç†

**æŒ‘æˆ˜**ï¼šæ–‡ä»¶I/Oæ“ä½œå¯èƒ½é˜»å¡ä¸»çº¿ç¨‹ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
import aiofiles

async def save_markdown(content: str, filename: str, directory: str) -> str:
    """å¼‚æ­¥ä¿å­˜Markdownæ–‡ä»¶"""
    file_path = os.path.join(directory, filename)
    
    async with aiofiles.open(file_path, 'w', encoding='utf-8') as f:
        await f.write(content)
    
    return file_path
```

ä½¿ç”¨`aiofiles`å®ç°çœŸæ­£çš„å¼‚æ­¥æ–‡ä»¶æ“ä½œã€‚

### 3. å›¾ç‰‡ä¸Šä¼ ä¼˜åŒ–

**æŒ‘æˆ˜**ï¼šæ”¯æŒå¤šç§å›¾ç‰‡æ ¼å¼ï¼Œå¤„ç†å¤§æ–‡ä»¶ä¸Šä¼ ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
def detect_image_type(data: bytes) -> str:
    """é€šè¿‡æ–‡ä»¶å¤´æ£€æµ‹å›¾ç‰‡ç±»å‹"""
    if data.startswith(b'\xff\xd8\xff'):
        return 'jpg'
    elif data.startswith(b'\x89PNG\r\n\x1a\n'):
        return 'png'
    elif data.startswith(b'GIF87a') or data.startswith(b'GIF89a'):
        return 'gif'
    # ... æ›´å¤šæ ¼å¼æ£€æµ‹
```

é€šè¿‡**æ–‡ä»¶å¤´æ£€æµ‹**è€Œéæ–‡ä»¶æ‰©å±•åï¼Œç¡®ä¿å®‰å…¨æ€§ã€‚

### 4. æ™ºèƒ½é…ç½®ç®¡ç†

**æŒ‘æˆ˜**ï¼šAPIæœåŠ¡å¯èƒ½ä¸ç¨³å®šï¼Œéœ€è¦å¤‡ä»½æ–¹æ¡ˆã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
class AIConfigManager:
    async def ensure_working_config(self):
        """ç¡®ä¿ä½¿ç”¨å¯å·¥ä½œçš„é…ç½®"""
        if not self.using_backup:
            if await self.test_config(self.primary_config):
                return self.current_config
            else:
                self.switch_to_backup()
        
        if await self.test_config(self.backup_config):
            return self.current_config
        else:
            raise Exception("æ‰€æœ‰AIé…ç½®éƒ½æ— æ³•ä½¿ç”¨")
```

**è‡ªåŠ¨æ•…éšœè½¬ç§»**æœºåˆ¶ï¼Œç¡®ä¿æœåŠ¡è¿ç»­æ€§ã€‚

## å¼€å‘ä½“ä¼šï¼šç»éªŒä¸æ•™è®­

### æˆåŠŸçš„å†³ç­–

1. **ç»Ÿä¸€å…¥å£è®¾è®¡**ï¼šè®©ç”¨æˆ·åªéœ€è¦ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œå¤§å¤§ç®€åŒ–äº†ä½¿ç”¨æµç¨‹
2. **AIé©±åŠ¨çš„è‡ªåŠ¨åŒ–**ï¼šå‡å°‘äº†ç”¨æˆ·çš„æ‰‹åŠ¨é€‰æ‹©å’Œé…ç½®
3. **ç§»åŠ¨ä¼˜å…ˆ**ï¼šç°ä»£ç”¨æˆ·ä¹ æƒ¯å†³å®šäº†ç§»åŠ¨ç«¯çš„é‡è¦æ€§
4. **è¯¦å°½çš„é”™è¯¯å¤„ç†**ï¼šè®©ç³»ç»Ÿåœ¨å„ç§å¼‚å¸¸æƒ…å†µä¸‹éƒ½èƒ½ä¼˜é›…é™çº§

### é‡åˆ°çš„æŒ‘æˆ˜

1. **AIå“åº”çš„ä¸ç¡®å®šæ€§**ï¼šéœ€è¦å¤§é‡çš„promptè°ƒä¼˜å’Œé”™è¯¯å¤„ç†
2. **å¼‚æ­¥ç¼–ç¨‹çš„å¤æ‚æ€§**ï¼šFastAPIçš„å¼‚æ­¥ç‰¹æ€§éœ€è¦ä»”ç»†è®¾è®¡
3. **è·¨å¹³å°å…¼å®¹æ€§**ï¼šWindowså’ŒLinuxçš„è·¯å¾„å¤„ç†å·®å¼‚
4. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼šåœ¨åŠŸèƒ½å’Œç®€æ´æ€§ä¹‹é—´æ‰¾åˆ°å¹³è¡¡

### æŠ€æœ¯å¿ƒå¾—

**å…³äºAIé›†æˆ**ï¼š
```python
# å¥½çš„å®è·µï¼šè¯¦ç»†çš„prompt + ç»“æ„åŒ–è¾“å‡º
system_prompt = """
ä½ æ˜¯ä¸€ä¸ªå†…å®¹åˆ†æåŠ©æ‰‹ã€‚è¯·è¿”å›JSONæ ¼å¼ï¼š
{"type": "url"/"note", "urls": [...], "reason": "..."}

åˆ¤æ–­è§„åˆ™ï¼š
1. URLç±»å‹ï¼šå†…å®¹ä¸»è¦æ˜¯é“¾æ¥
2. ç¬”è®°ç±»å‹ï¼šä¸»è¦æ˜¯æ–‡å­—ä¿¡æ¯
"""

# åçš„å®è·µï¼šæ¨¡ç³Šçš„prompt
bad_prompt = "åˆ¤æ–­è¿™æ˜¯URLè¿˜æ˜¯ç¬”è®°"
```

**å…³äºé”™è¯¯å¤„ç†**ï¼š
```python
# å¥½çš„å®è·µï¼šå¤šå±‚æ¬¡é”™è¯¯å¤„ç†
try:
    result = await ai_service.process_content(content)
except AIServiceError as e:
    # ä½¿ç”¨å¤‡ç”¨é…ç½®é‡è¯•
    result = await ai_service.process_with_backup(content)
except Exception as e:
    # ä¼˜é›…é™çº§
    result = await fallback_processor.process(content)
```

**å…³äºç”¨æˆ·ä½“éªŒ**ï¼š
```javascript
// å¥½çš„å®è·µï¼šå®æ—¶åé¦ˆ
function showProgress(message) {
    statusDiv.innerHTML = `<div class="loading">${message}</div>`;
    statusDiv.scrollIntoView({ behavior: 'smooth' });
}

// åçš„å®è·µï¼šæ— åé¦ˆçš„é•¿æ—¶é—´ç­‰å¾…
```

## æ€§èƒ½ä¼˜åŒ–ä¸éƒ¨ç½²

### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

**åç«¯ä¼˜åŒ–**ï¼š
- å¼‚æ­¥å¤„ç†æ‰€æœ‰I/Oæ“ä½œ
- æ™ºèƒ½é…ç½®ç¼“å­˜å’Œåˆ‡æ¢
- æ–‡ä»¶åˆ†ç±»å­˜å‚¨ï¼ˆmark/ã€note/ã€photo/ï¼‰

**å‰ç«¯ä¼˜åŒ–**ï¼š
- é›¶ä¾èµ–è®¾è®¡ï¼Œå‡å°‘åŠ è½½æ—¶é—´
- å“åº”å¼å›¾ç‰‡å¤„ç†
- è¯·æ±‚å»é‡å’Œè¶…æ—¶æ§åˆ¶

### éƒ¨ç½²æ–¹æ¡ˆ

**Dockerå®¹å™¨åŒ–**ï¼š
```yaml
# docker-compose.yml
version: '3.8'
services:
  hebecrawl:
    build: .
    ports:
      - "3080:8000"
    volumes:
      - ./mark:/app/mark
      - ./note:/app/note
      - ./photo:/app/photo
    environment:
      - AI_API_KEY=${AI_API_KEY}
      - FIRECRAWL_API_KEY=${FIRECRAWL_API_KEY}
```

**ä¸€é”®å¯åŠ¨**ï¼š
```bash
#!/bin/bash
# æ™ºèƒ½æ£€æµ‹ç¯å¢ƒå¹¶å¯åŠ¨
if command -v docker-compose &> /dev/null; then
    echo "ğŸ³ ä½¿ç”¨Dockerå¯åŠ¨ï¼ˆæ¨èï¼‰"
    docker-compose up --build -d
    echo "âœ… æœåŠ¡å·²å¯åŠ¨ï¼šhttp://localhost:3080"
else
    echo "ğŸ ä½¿ç”¨Pythonå¯åŠ¨"
    pip install -r requirements.txt
    python main.py
fi
```

## é¡¹ç›®æ•°æ®ç»Ÿè®¡

### ä»£ç è§„æ¨¡
- **æ€»ä»£ç è¡Œæ•°**ï¼šçº¦2000è¡Œ
- **æ ¸å¿ƒæœåŠ¡**ï¼š3ä¸ªä¸»è¦æœåŠ¡ç±»
- **APIæ¥å£**ï¼š8ä¸ªä¸»è¦endpoint
- **å‰ç«¯æ–‡ä»¶**ï¼š1ä¸ªä¸»è¦HTMLæ–‡ä»¶ï¼ˆè‡ªåŒ…å«ï¼‰

### åŠŸèƒ½å®Œæ•´åº¦
- **AIæ™ºèƒ½åˆ¤æ–­**ï¼šâœ… æ”¯æŒURLå’Œç¬”è®°è‡ªåŠ¨è¯†åˆ«
- **ç½‘é¡µæŠ“å–**ï¼šâœ… é›†æˆFirecrawlæœåŠ¡
- **å†…å®¹æ€»ç»“**ï¼šâœ… AIé©±åŠ¨çš„æ™ºèƒ½æ€»ç»“
- **æ–‡ä»¶ç®¡ç†**ï¼šâœ… åˆ†ç±»å­˜å‚¨å’Œæ™ºèƒ½å‘½å
- **å›¾ç‰‡å¤„ç†**ï¼šâœ… å¤šæ ¼å¼æ”¯æŒå’Œå®‰å…¨æ£€æµ‹
- **ç§»åŠ¨é€‚é…**ï¼šâœ… å“åº”å¼è®¾è®¡
- **é”™è¯¯å¤„ç†**ï¼šâœ… å¤šå±‚æ¬¡å®¹é”™æœºåˆ¶
- **éƒ¨ç½²æ”¯æŒ**ï¼šâœ… Dockerå’ŒPythonåŒé‡æ”¯æŒ

### æµ‹è¯•è¦†ç›–
- **å•å…ƒæµ‹è¯•**ï¼šæ ¸å¿ƒæœåŠ¡åŠŸèƒ½
- **é›†æˆæµ‹è¯•**ï¼šAPIæ¥å£å®Œæ•´æ€§
- **å‰ç«¯æµ‹è¯•**ï¼šç”¨æˆ·ç•Œé¢äº¤äº’
- **éƒ¨ç½²æµ‹è¯•**ï¼šDockerå’ŒPythonç¯å¢ƒ

## æœªæ¥è§„åˆ’

### çŸ­æœŸæ”¹è¿›
1. **PWAæ”¯æŒ**ï¼šæ·»åŠ Service Workerå®ç°ç¦»çº¿åŠŸèƒ½
2. **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒå¤šURLåŒæ—¶å¤„ç†
3. **å†å²è®°å½•**ï¼šä¿å­˜å’ŒæŸ¥çœ‹å¤„ç†å†å²
4. **ä¸»é¢˜åˆ‡æ¢**ï¼šæ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜

### é•¿æœŸè§„åˆ’
1. **æ’ä»¶ç³»ç»Ÿ**ï¼šæ”¯æŒè‡ªå®šä¹‰å¤„ç†å™¨
2. **APIæ‰©å±•**ï¼šå¼€æ”¾APIä¾›ç¬¬ä¸‰æ–¹é›†æˆ
3. **å¤šè¯­è¨€æ”¯æŒ**ï¼šå›½é™…åŒ–åŠŸèƒ½
4. **äº‘ç«¯å­˜å‚¨**ï¼šæ”¯æŒå¤šç§å­˜å‚¨åç«¯

## æ€»ç»“ï¼šä»æƒ³æ³•åˆ°äº§å“çš„å®Œæ•´å†ç¨‹

HebeCrawlé¡¹ç›®ä»æœ€åˆçš„æƒ³æ³•åˆ°æœ€ç»ˆçš„äº§å“ï¼Œç»å†äº†å®Œæ•´çš„è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸã€‚è¿™ä¸ªé¡¹ç›®çš„æˆåŠŸåœ¨äºï¼š

### æŠ€æœ¯å±‚é¢çš„æˆåŠŸ
1. **ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆ**ï¼šFastAPI + AI + Dockerçš„ç»„åˆ
2. **ä¼˜é›…çš„æ¶æ„è®¾è®¡**ï¼šæ¸…æ™°çš„æœåŠ¡åˆ†å±‚å’ŒèŒè´£åˆ’åˆ†
3. **å®Œå–„çš„é”™è¯¯å¤„ç†**ï¼šå¤šé‡ä¿éšœç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
4. **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**ï¼šç§»åŠ¨ç«¯å‹å¥½çš„ç•Œé¢è®¾è®¡

### å·¥ç¨‹å®è·µçš„æˆåŠŸ
1. **è¿­ä»£å¼å¼€å‘**ï¼šä»MVPåˆ°å®Œæ•´äº§å“çš„æ¸è¿›å¼æ¼”è¿›
2. **æµ‹è¯•é©±åŠ¨**ï¼šå®Œæ•´çš„æµ‹è¯•è¦†ç›–ä¿è¯ä»£ç è´¨é‡
3. **æ–‡æ¡£å…ˆè¡Œ**ï¼šè¯¦ç»†çš„æ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜
4. **éƒ¨ç½²è‡ªåŠ¨åŒ–**ï¼šä¸€é”®å¯åŠ¨å’ŒDockeråŒ–éƒ¨ç½²

### äº§å“æ€ç»´çš„æˆåŠŸ
1. **ç”¨æˆ·éœ€æ±‚æ´å¯Ÿ**ï¼šè§£å†³çœŸå®çš„å†…å®¹å¤„ç†ç—›ç‚¹
2. **ç®€å•æ˜“ç”¨**ï¼šé›¶é…ç½®çš„ä½¿ç”¨ä½“éªŒ
3. **æ™ºèƒ½åŒ–**ï¼šAIé©±åŠ¨çš„è‡ªåŠ¨åŒ–å¤„ç†
4. **å¯æ‰©å±•æ€§**ï¼šä¸ºæœªæ¥åŠŸèƒ½ç•™å‡ºäº†è¶³å¤Ÿçš„ç©ºé—´

è¿™ä¸ªé¡¹ç›®ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯å¯¹ç°ä»£è½¯ä»¶å¼€å‘ç†å¿µçš„å®Œæ•´å®è·µã€‚å®ƒå±•ç¤ºäº†å¦‚ä½•å°†AIæŠ€æœ¯èå…¥ä¼ ç»Ÿçš„Webåº”ç”¨ï¼Œå¦‚ä½•è®¾è®¡ç”¨æˆ·å‹å¥½çš„ç•Œé¢ï¼Œä»¥åŠå¦‚ä½•æ„å»ºä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„ç³»ç»Ÿã€‚

å¯¹äºå…¶ä»–å¼€å‘è€…æ¥è¯´ï¼ŒHebeCrawlé¡¹ç›®æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒæ¨¡æ¿ï¼š**å¦‚ä½•æ„å»ºä¸€ä¸ªç°ä»£åŒ–çš„ã€AIé©±åŠ¨çš„Webåº”ç”¨**ã€‚ä»æŠ€æœ¯é€‰å‹åˆ°æ¶æ„è®¾è®¡ï¼Œä»ç”¨æˆ·ä½“éªŒåˆ°éƒ¨ç½²è¿ç»´ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½æœ‰å€¼å¾—å­¦ä¹ å’Œå€Ÿé‰´çš„åœ°æ–¹ã€‚

æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªé¡¹ç›®è¯æ˜äº†**å¥½çš„è½¯ä»¶ä¸ä»…è¦æŠ€æœ¯å…ˆè¿›ï¼Œæ›´è¦çœŸæ­£è§£å†³ç”¨æˆ·çš„é—®é¢˜**ã€‚åœ¨AIæ—¶ä»£ï¼Œæˆ‘ä»¬éœ€è¦çš„ä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯è®©æŠ€æœ¯çœŸæ­£ä¸ºç”¨æˆ·æœåŠ¡ï¼Œè®©å¤æ‚çš„äº‹æƒ…å˜å¾—ç®€å•ã€‚

---

*é¡¹ç›®åœ°å€ï¼š[HebeCrawl](https://github.com/your-username/hebecrawl)*  
*æŠ€æœ¯æ ˆï¼šFastAPI + Python + AI + Docker*  
*å¼€å‘å‘¨æœŸï¼š2å‘¨*  
*ä»£ç é‡ï¼šçº¦2000è¡Œ*