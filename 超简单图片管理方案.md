# 📸 超简单图片管理方案

## 🎯 核心理念
**图片就放在Markdown文件旁边，构建时自动处理！**

## 📁 文件组织方式

### 在Obsidian中的文件结构
```
src/content/post/
├── 2025-01-15_我的博客文章.md
├── screenshot.png              # 文章中的截图
├── diagram.jpg                 # 文章中的图表
└── photo.webp                  # 文章中的照片

src/content/note/
├── 2025-01-15_我的学习笔记.md
├── concept.png                 # 笔记中的概念图
└── formula.jpg                 # 笔记中的公式
```

## ✍️ 在Obsidian中写作

### 1. 设置Obsidian
- **附件默认存放路径**：当前文件所在文件夹
- **新建附件的存放位置**：当前文件所在文件夹

### 2. 在文章中插入图片
```markdown
# 直接使用文件名即可
![我的截图](screenshot.png)
![概念图](concept.png)
![公式图片](formula.jpg)
```

## 🚀 发布流程

### 一键发布
```batch
# 运行发布脚本
simple-publish.bat
```

### 自动处理过程
1. **构建时自动处理** - Astro构建时会自动：
   - 扫描所有Markdown文件夹
   - 复制图片到 `public/images/` 目录
   - 更新Markdown中的图片路径
   
2. **路径自动转换**：
   ```markdown
   # 源文件中：![截图](screenshot.png)
   # 构建后：![截图](/images/posts/2025-01-15_我的博客文章/screenshot.png)
   ```

3. **Vercel自动部署** - 推送后自动构建和部署

## ✅ 优势

- 🎨 **Obsidian体验完美** - 正常插入图片，无需任何特殊操作
- 📁 **组织清晰直观** - 图片就在文章旁边，一目了然
- 🔄 **完全自动化** - 构建时自动处理，无需手动脚本
- 🚀 **一键发布** - 写完直接运行发布脚本即可
- 💾 **版本控制** - 图片和文章一起管理，永不丢失
- 🌐 **网站路径标准** - 自动转换为正确的网站路径

## 📋 实际使用步骤

### 1. 写作
在Obsidian中正常写作，插入图片时选择"复制到当前文件夹"

### 2. 发布
```batch
simple-publish.bat
```

### 3. 等待
几分钟后在你的网站上查看更新

## 🔧 技术原理

使用了Astro插件系统，在构建开始时(`astro:build:start`)自动：
1. 扫描 `src/content/post/` 和 `src/content/note/` 目录
2. 找到每篇文章旁边的图片文件
3. 复制到 `public/images/posts/文章名/` 或 `public/images/notes/文章名/`
4. 更新Markdown文件中的图片引用路径

## ⚡ 这是最简单的方案！
- 无需手动复制图片
- 无需记住复杂的路径规则  
- 无需运行额外的脚本
- 完全符合Obsidian的使用习惯

**总结：写完文章，运行 `simple-publish.bat`，就这么简单！** 🎉