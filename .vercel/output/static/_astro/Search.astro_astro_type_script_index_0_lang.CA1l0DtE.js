const m="modulepreload",w=function(c){return"/"+c},u={},p=function(e,t,r){let l=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=i?.nonce||i?.getAttribute("nonce");l=Promise.allSettled(t.map(n=>{if(n=w(n),n in u)return;u[n]=!0;const a=n.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${h}`))return;const s=document.createElement("link");if(s.rel=a?"stylesheet":m,a||(s.as="script"),s.crossOrigin="",s.href=n,o&&s.setAttribute("nonce",o),document.head.appendChild(s),a)return new Promise((f,g)=>{s.addEventListener("load",f),s.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${n}`)))})}))}function d(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return l.then(i=>{for(const o of i||[])o.status==="rejected"&&d(o.reason);return e().catch(d)})};class E extends HTMLElement{closeBtn;dialog;dialogFrame;openBtn;closeModal=()=>{this.dialog.open&&(this.dialog.close(),window.removeEventListener("click",this.onWindowClick))};onWindowClick=e=>{("href"in(e.target||{})||document.body.contains(e.target)&&!this.dialogFrame.contains(e.target))&&this.closeModal()};onWindowKeydown=e=>{e.key==="/"&&!this.dialog.open&&(this.openModal(),e.preventDefault())};openModal=e=>{this.dialog.showModal(),this.querySelector("input")?.focus(),e?.stopPropagation(),window.addEventListener("click",this.onWindowClick)};constructor(){super(),this.openBtn=this.querySelector("button[data-open-modal]"),this.closeBtn=this.querySelector("button[data-close-modal]"),this.dialog=this.querySelector("dialog"),this.dialogFrame=this.querySelector(".dialog-frame"),this.openBtn.addEventListener("click",this.openModal),this.openBtn.disabled=!1,this.closeBtn.addEventListener("click",this.closeModal)}connectedCallback(){window.addEventListener("keydown",this.onWindowKeydown),(window.requestIdleCallback||(t=>setTimeout(t,1)))(async()=>{try{const{PagefindUI:t}=await p(async()=>{const{PagefindUI:l}=await import("./ui-core.rNlTdx3I.js");return{PagefindUI:l}},[]);console.log("PagefindUI loaded successfully");const r=new t({element:"#hanbayu__search",showImages:!1,showSubResults:!0,translations:{placeholder:"搜索文章和笔记...",clear_search:"清除搜索",load_more:"加载更多结果",search_label:"搜索此网站",filters_label:"筛选",zero_results:"未找到相关内容 [SEARCH_TERM]",many_results:"[COUNT] 个搜索结果",one_result:"[COUNT] 个搜索结果",alt_search:"未找到 [SEARCH_TERM] 的相关内容。显示 [DIFFERENT_TERM] 的结果：",search_suggestion:"尝试搜索 [DIFFERENT_TERM]"}});console.log("PagefindUI initialized")}catch(t){console.error("Failed to load PagefindUI:",t),fetch("/pagefind/pagefind.js").then(r=>{r.ok?console.log("Pagefind files found, but UI failed to load"):console.error("Pagefind files not found:",r.status)}).catch(r=>{console.error("Failed to check pagefind files:",r)})}})}disconnectedCallback(){window.removeEventListener("keydown",this.onWindowKeydown)}}customElements.define("site-search",E);export{p as _};
